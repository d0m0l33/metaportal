{"ast":null,"code":"import { Loader, FileLoader, BufferGeometry, Float32BufferAttribute } from 'three';\n\nclass XYZLoader extends Loader {\n  load(url, onLoad, onProgress, onError) {\n    const scope = this;\n    const loader = new FileLoader(this.manager);\n    loader.setPath(this.path);\n    loader.setRequestHeader(this.requestHeader);\n    loader.setWithCredentials(this.withCredentials);\n    loader.load(url, function (text) {\n      try {\n        onLoad(scope.parse(text));\n      } catch (e) {\n        if (onError) {\n          onError(e);\n        } else {\n          console.error(e);\n        }\n\n        scope.manager.itemError(url);\n      }\n    }, onProgress, onError);\n  }\n\n  parse(text) {\n    const lines = text.split('\\n');\n    const vertices = [];\n    const colors = [];\n\n    for (let line of lines) {\n      line = line.trim();\n      if (line.charAt(0) === '#') continue; // skip comments\n\n      const lineValues = line.split(/\\s+/);\n\n      if (lineValues.length === 3) {\n        // XYZ\n        vertices.push(parseFloat(lineValues[0]));\n        vertices.push(parseFloat(lineValues[1]));\n        vertices.push(parseFloat(lineValues[2]));\n      }\n\n      if (lineValues.length === 6) {\n        // XYZRGB\n        vertices.push(parseFloat(lineValues[0]));\n        vertices.push(parseFloat(lineValues[1]));\n        vertices.push(parseFloat(lineValues[2]));\n        colors.push(parseFloat(lineValues[3]) / 255);\n        colors.push(parseFloat(lineValues[4]) / 255);\n        colors.push(parseFloat(lineValues[5]) / 255);\n      }\n    }\n\n    const geometry = new BufferGeometry();\n    geometry.setAttribute('position', new Float32BufferAttribute(vertices, 3));\n\n    if (colors.length > 0) {\n      geometry.setAttribute('color', new Float32BufferAttribute(colors, 3));\n    }\n\n    return geometry;\n  }\n\n}\n\nexport { XYZLoader };","map":{"version":3,"sources":["/Users/dominiclee/Desktop/ethprojs/metaportal/node_modules/three-stdlib/loaders/XYZLoader.js"],"names":["Loader","FileLoader","BufferGeometry","Float32BufferAttribute","XYZLoader","load","url","onLoad","onProgress","onError","scope","loader","manager","setPath","path","setRequestHeader","requestHeader","setWithCredentials","withCredentials","text","parse","e","console","error","itemError","lines","split","vertices","colors","line","trim","charAt","lineValues","length","push","parseFloat","geometry","setAttribute"],"mappings":"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","sourcesContent":["import { Loader, FileLoader, BufferGeometry, Float32BufferAttribute } from 'three';\n\nclass XYZLoader extends Loader {\n  load(url, onLoad, onProgress, onError) {\n    const scope = this;\n    const loader = new FileLoader(this.manager);\n    loader.setPath(this.path);\n    loader.setRequestHeader(this.requestHeader);\n    loader.setWithCredentials(this.withCredentials);\n    loader.load(url, function (text) {\n      try {\n        onLoad(scope.parse(text));\n      } catch (e) {\n        if (onError) {\n          onError(e);\n        } else {\n          console.error(e);\n        }\n\n        scope.manager.itemError(url);\n      }\n    }, onProgress, onError);\n  }\n\n  parse(text) {\n    const lines = text.split('\\n');\n    const vertices = [];\n    const colors = [];\n\n    for (let line of lines) {\n      line = line.trim();\n      if (line.charAt(0) === '#') continue; // skip comments\n\n      const lineValues = line.split(/\\s+/);\n\n      if (lineValues.length === 3) {\n        // XYZ\n        vertices.push(parseFloat(lineValues[0]));\n        vertices.push(parseFloat(lineValues[1]));\n        vertices.push(parseFloat(lineValues[2]));\n      }\n\n      if (lineValues.length === 6) {\n        // XYZRGB\n        vertices.push(parseFloat(lineValues[0]));\n        vertices.push(parseFloat(lineValues[1]));\n        vertices.push(parseFloat(lineValues[2]));\n        colors.push(parseFloat(lineValues[3]) / 255);\n        colors.push(parseFloat(lineValues[4]) / 255);\n        colors.push(parseFloat(lineValues[5]) / 255);\n      }\n    }\n\n    const geometry = new BufferGeometry();\n    geometry.setAttribute('position', new Float32BufferAttribute(vertices, 3));\n\n    if (colors.length > 0) {\n      geometry.setAttribute('color', new Float32BufferAttribute(colors, 3));\n    }\n\n    return geometry;\n  }\n\n}\n\nexport { XYZLoader };\n"]},"metadata":{},"sourceType":"module"}