"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react"),r=require("@react-three/fiber"),n=require("three"),t=require("three-stdlib"),s=require("use-asset"),u=require("../helpers/environment-assets.cjs.js");function o(e){if(e&&e.__esModule)return e;var r=Object.create(null);return e&&Object.keys(e).forEach((function(n){if("default"!==n){var t=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,t.get?t:{enumerable:!0,get:function(){return e[n]}})}})),r.default=e,Object.freeze(r)}var a=o(e);exports.Environment=function({background:e=!1,files:o=["/px.png","/nx.png","/py.png","/ny.png","/pz.png","/nz.png"],path:i="",preset:c,scene:d,extensions:p}){if(c){if(!(c in u.presetsObj))throw new Error("Preset must be one of: "+Object.keys(u.presetsObj).join(", "));o=u.presetsObj[c],i="https://rawcdn.githack.com/pmndrs/drei-assets/aa3600359ba664d546d05821bcbca42013587df2/hdri/"}const b=r.useThree((({scene:e})=>e)),f=r.useThree((({gl:e})=>e)),g=Array.isArray(o),l=g?n.CubeTextureLoader:t.RGBELoader,m=r.useLoader(l,g?[o]:o,(e=>{e.setPath(i),p&&p(e)})),h=g?m[0]:m,j=s.useAsset((()=>new Promise((e=>{const r=new n.PMREMGenerator(f),t=function(e,r,n){return n?(r.compileEquirectangularShader(),r.fromCubemap(e).texture):r.fromEquirectangular(e).texture}(h,r,g);r.dispose(),e(t)}))),h);return a.useLayoutEffect((()=>{const r=d?d.background:b.background,n=d?d.environment:b.environment;return d?(d.environment=j,e&&(d.background=j)):(b.environment=j,e&&(b.background=j)),()=>{d?(d.environment=n,d.background=r):(b.environment=n,b.background=r),s.useAsset.clear(h),j.dispose()}}),[j,e,d]),null};
