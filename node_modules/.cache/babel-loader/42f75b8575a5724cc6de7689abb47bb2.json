{"ast":null,"code":"import _regeneratorRuntime from \"/Users/dominiclee/Desktop/ethprojs/metaportal/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/dominiclee/Desktop/ethprojs/metaportal/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/Users/dominiclee/Desktop/ethprojs/metaportal/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport { useEffect, useState } from 'react';\nimport { useEthers } from './useEthers';\nexport function useTokenList(tokenListURI, overrideChainId, tags) {\n  var _useEthers = useEthers(),\n      providerChainId = _useEthers.chainId;\n\n  var _useState = useState(),\n      _useState2 = _slicedToArray(_useState, 2),\n      tokenList = _useState2[0],\n      setTokenList = _useState2[1];\n\n  var chainId = overrideChainId || providerChainId;\n  useEffect(function () {\n    fetch(tokenListURI).then( /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(response) {\n        var _yield$response$json, name, logoURI, tokens, errorMessage;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (!response.ok) {\n                  _context.next = 10;\n                  break;\n                }\n\n                _context.next = 3;\n                return response.json();\n\n              case 3:\n                _yield$response$json = _context.sent;\n                name = _yield$response$json.name;\n                logoURI = _yield$response$json.logoURI;\n                tokens = _yield$response$json.tokens;\n                setTokenList({\n                  name: name,\n                  logoURI: logoURI,\n                  tokens: tokens.filter(function (token) {\n                    var sameChainId = token.chainId === chainId;\n\n                    if (!tags) {\n                      return sameChainId;\n                    }\n\n                    return sameChainId && token.tags && token.tags.some(function (tag) {\n                      return tags.includes(tag);\n                    });\n                  })\n                });\n                _context.next = 14;\n                break;\n\n              case 10:\n                _context.next = 12;\n                return response.text();\n\n              case 12:\n                errorMessage = _context.sent;\n                return _context.abrupt(\"return\", Promise.reject(new Error(errorMessage)));\n\n              case 14:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }()).catch(function (err) {\n      console.log(err);\n      setTokenList(undefined);\n    });\n  }, [tokenListURI, chainId]);\n  return tokenList;\n}","map":{"version":3,"sources":["../../../../src/hooks/useTokenList.ts"],"names":[],"mappings":";;;AAAA,SAAS,SAAT,EAAoB,QAApB,QAAoC,OAApC;AAGA,SAAS,SAAT,QAA0B,aAA1B;AAQA,OAAM,SAAU,YAAV,CAAuB,YAAvB,EAA6C,eAA7C,EAAwE,IAAxE,EAAuF;AAC3F,mBAAqC,SAAS,EAA9C;AAAA,MAAiB,eAAjB,cAAQ,OAAR;;AACA,kBAAkC,QAAQ,EAA1C;AAAA;AAAA,MAAO,SAAP;AAAA,MAAkB,YAAlB;;AAEA,MAAM,OAAO,GAAG,eAAe,IAAI,eAAnC;AAEA,EAAA,SAAS,CAAC,YAAK;AACb,IAAA,KAAK,CAAC,YAAD,CAAL,CACG,IADH;AAAA,0EACQ,iBAAO,QAAP;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA,qBACA,QAAQ,CAAC,EADT;AAAA;AAAA;AAAA;;AAAA;AAAA,uBAEsC,QAAQ,CAAC,IAAT,EAFtC;;AAAA;AAAA;AAEM,gBAAA,IAFN,wBAEM,IAFN;AAEY,gBAAA,OAFZ,wBAEY,OAFZ;AAEqB,gBAAA,MAFrB,wBAEqB,MAFrB;AAGF,gBAAA,YAAY,CAAC;AACX,kBAAA,IAAI,EAAJ,IADW;AAEX,kBAAA,OAAO,EAAP,OAFW;AAGX,kBAAA,MAAM,EAAG,MAAsB,CAAC,MAAvB,CAA8B,UAAC,KAAD,EAAU;AAC/C,wBAAM,WAAW,GAAG,KAAK,CAAC,OAAN,KAAkB,OAAtC;;AACA,wBAAI,CAAC,IAAL,EAAW;AACT,6BAAO,WAAP;AACD;;AACD,2BAAO,WAAW,IAAI,KAAK,CAAC,IAArB,IAA6B,KAAK,CAAC,IAAN,CAAW,IAAX,CAAgB,UAAC,GAAD;AAAA,6BAAS,IAAI,CAAC,QAAL,CAAc,GAAd,CAAT;AAAA,qBAAhB,CAApC;AACD,mBANQ;AAHE,iBAAD,CAAZ;AAHE;AAAA;;AAAA;AAAA;AAAA,uBAeyB,QAAQ,CAAC,IAAT,EAfzB;;AAAA;AAeI,gBAAA,YAfJ;AAAA,iDAgBK,OAAO,CAAC,MAAR,CAAe,IAAI,KAAJ,CAAU,YAAV,CAAf,CAhBL;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OADR;;AAAA;AAAA;AAAA;AAAA,SAoBG,KApBH,CAoBS,UAAC,GAAD,EAAQ;AACb,MAAA,OAAO,CAAC,GAAR,CAAY,GAAZ;AACA,MAAA,YAAY,CAAC,SAAD,CAAZ;AACD,KAvBH;AAwBD,GAzBQ,EAyBN,CAAC,YAAD,EAAe,OAAf,CAzBM,CAAT;AA2BA,SAAO,SAAP;AACD","sourceRoot":"","sourcesContent":["import { useEffect, useState } from 'react';\nimport { useEthers } from './useEthers';\nexport function useTokenList(tokenListURI, overrideChainId, tags) {\n    const { chainId: providerChainId } = useEthers();\n    const [tokenList, setTokenList] = useState();\n    const chainId = overrideChainId || providerChainId;\n    useEffect(() => {\n        fetch(tokenListURI)\n            .then(async (response) => {\n            if (response.ok) {\n                const { name, logoURI, tokens } = await response.json();\n                setTokenList({\n                    name,\n                    logoURI,\n                    tokens: tokens.filter((token) => {\n                        const sameChainId = token.chainId === chainId;\n                        if (!tags) {\n                            return sameChainId;\n                        }\n                        return sameChainId && token.tags && token.tags.some((tag) => tags.includes(tag));\n                    }),\n                });\n            }\n            else {\n                const errorMessage = await response.text();\n                return Promise.reject(new Error(errorMessage));\n            }\n        })\n            .catch((err) => {\n            console.log(err);\n            setTokenList(undefined);\n        });\n    }, [tokenListURI, chainId]);\n    return tokenList;\n}\n//# sourceMappingURL=useTokenList.js.map"]},"metadata":{},"sourceType":"module"}