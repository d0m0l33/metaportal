{"ast":null,"code":"import _slicedToArray from \"/Users/dominiclee/Desktop/ethprojs/metaportal/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectWithoutProperties from \"/Users/dominiclee/Desktop/ethprojs/metaportal/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\nvar _excluded = [\"depthBuffer\", \"color\", \"distance\", \"angle\", \"attenuation\", \"anglePower\"];\nimport _extends from '@babel/runtime/helpers/esm/extends';\nimport * as React from 'react';\nimport { Vector3, CylinderGeometry, Matrix4 } from 'three';\nimport { useThree, useFrame } from '@react-three/fiber';\nimport { SpotLightMaterial } from '../materials/SpotLightMaterial.js';\nvar vec = new Vector3();\nvar SpotLight = /*#__PURE__*/React.forwardRef(function (_ref, ref) {\n  var depthBuffer = _ref.depthBuffer,\n      _ref$color = _ref.color,\n      color = _ref$color === void 0 ? 'white' : _ref$color,\n      _ref$distance = _ref.distance,\n      distance = _ref$distance === void 0 ? 5 : _ref$distance,\n      _ref$angle = _ref.angle,\n      angle = _ref$angle === void 0 ? 0.15 : _ref$angle,\n      _ref$attenuation = _ref.attenuation,\n      attenuation = _ref$attenuation === void 0 ? 5 : _ref$attenuation,\n      _ref$anglePower = _ref.anglePower,\n      anglePower = _ref$anglePower === void 0 ? 5 : _ref$anglePower,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  var mesh = React.useRef(null);\n  var size = useThree(function (state) {\n    return state.size;\n  });\n  var camera = useThree(function (state) {\n    return state.camera;\n  });\n  var dpr = useThree(function (state) {\n    return state.viewport.dpr;\n  });\n\n  var _React$useState = React.useState(function () {\n    return new SpotLightMaterial();\n  }),\n      _React$useState2 = _slicedToArray(_React$useState, 1),\n      material = _React$useState2[0];\n\n  useFrame(function () {\n    material.uniforms.spotPosition.value.copy(mesh.current.getWorldPosition(vec));\n    mesh.current.lookAt(mesh.current.parent.target.position);\n  });\n  var geom = React.useMemo(function () {\n    var geometry = new CylinderGeometry(0.1, angle * 7, distance, 128, 64, true);\n    geometry.applyMatrix4(new Matrix4().makeTranslation(0, -distance / 2, 0));\n    geometry.applyMatrix4(new Matrix4().makeRotationX(-Math.PI / 2));\n    return geometry;\n  }, [angle, distance]);\n  return /*#__PURE__*/React.createElement(\"spotLight\", _extends({\n    ref: ref,\n    angle: angle,\n    color: color,\n    distance: distance\n  }, props), /*#__PURE__*/React.createElement(\"mesh\", {\n    ref: mesh,\n    geometry: geom\n  }, /*#__PURE__*/React.createElement(\"primitive\", {\n    object: material,\n    attach: \"material\",\n    \"uniforms-lightColor-value\": color,\n    \"uniforms-attenuation-value\": attenuation,\n    \"uniforms-anglePower-value\": anglePower,\n    \"uniforms-depth-value\": depthBuffer,\n    \"uniforms-cameraNear-value\": camera.near,\n    \"uniforms-cameraFar-value\": camera.far,\n    \"uniforms-resolution-value\": depthBuffer ? [size.width * dpr, size.height * dpr] : [0, 0]\n  })));\n});\nexport { SpotLight };","map":{"version":3,"sources":["/Users/dominiclee/Desktop/ethprojs/metaportal/node_modules/@react-three/drei/core/SpotLight.js"],"names":["_extends","React","Vector3","CylinderGeometry","Matrix4","useThree","useFrame","SpotLightMaterial","vec","SpotLight","forwardRef","ref","depthBuffer","color","distance","angle","attenuation","anglePower","props","mesh","useRef","size","state","camera","dpr","viewport","useState","material","uniforms","spotPosition","value","copy","current","getWorldPosition","lookAt","parent","target","position","geom","useMemo","geometry","applyMatrix4","makeTranslation","makeRotationX","Math","PI","createElement","object","attach","near","far","width","height"],"mappings":"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","sourcesContent":["import _extends from '@babel/runtime/helpers/esm/extends';\nimport * as React from 'react';\nimport { Vector3, CylinderGeometry, Matrix4 } from 'three';\nimport { useThree, useFrame } from '@react-three/fiber';\nimport { SpotLightMaterial } from '../materials/SpotLightMaterial.js';\n\nconst vec = new Vector3();\nconst SpotLight = /*#__PURE__*/React.forwardRef(({\n  depthBuffer,\n  color = 'white',\n  distance = 5,\n  angle = 0.15,\n  attenuation = 5,\n  anglePower = 5,\n  ...props\n}, ref) => {\n  const mesh = React.useRef(null);\n  const size = useThree(state => state.size);\n  const camera = useThree(state => state.camera);\n  const dpr = useThree(state => state.viewport.dpr);\n  const [material] = React.useState(() => new SpotLightMaterial());\n  useFrame(() => {\n    material.uniforms.spotPosition.value.copy(mesh.current.getWorldPosition(vec));\n    mesh.current.lookAt(mesh.current.parent.target.position);\n  });\n  const geom = React.useMemo(() => {\n    const geometry = new CylinderGeometry(0.1, angle * 7, distance, 128, 64, true);\n    geometry.applyMatrix4(new Matrix4().makeTranslation(0, -distance / 2, 0));\n    geometry.applyMatrix4(new Matrix4().makeRotationX(-Math.PI / 2));\n    return geometry;\n  }, [angle, distance]);\n  return /*#__PURE__*/React.createElement(\"spotLight\", _extends({\n    ref: ref,\n    angle: angle,\n    color: color,\n    distance: distance\n  }, props), /*#__PURE__*/React.createElement(\"mesh\", {\n    ref: mesh,\n    geometry: geom\n  }, /*#__PURE__*/React.createElement(\"primitive\", {\n    object: material,\n    attach: \"material\",\n    \"uniforms-lightColor-value\": color,\n    \"uniforms-attenuation-value\": attenuation,\n    \"uniforms-anglePower-value\": anglePower,\n    \"uniforms-depth-value\": depthBuffer,\n    \"uniforms-cameraNear-value\": camera.near,\n    \"uniforms-cameraFar-value\": camera.far,\n    \"uniforms-resolution-value\": depthBuffer ? [size.width * dpr, size.height * dpr] : [0, 0]\n  })));\n});\n\nexport { SpotLight };\n"]},"metadata":{},"sourceType":"module"}