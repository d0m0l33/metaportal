{"ast":null,"code":"\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.serializeProduction = exports.serializeGrammar = exports.Terminal = exports.Alternation = exports.RepetitionWithSeparator = exports.Repetition = exports.RepetitionMandatoryWithSeparator = exports.RepetitionMandatory = exports.Option = exports.Alternative = exports.Rule = exports.NonTerminal = exports.AbstractProduction = void 0;\n\nvar utils_1 = require(\"@chevrotain/utils\");\n\nvar tokens_public_1 = require(\"../../../scan/tokens_public\");\n\nvar AbstractProduction =\n/** @class */\nfunction () {\n  function AbstractProduction(_definition) {\n    this._definition = _definition;\n  }\n\n  Object.defineProperty(AbstractProduction.prototype, \"definition\", {\n    get: function get() {\n      return this._definition;\n    },\n    set: function set(value) {\n      this._definition = value;\n    },\n    enumerable: false,\n    configurable: true\n  });\n\n  AbstractProduction.prototype.accept = function (visitor) {\n    visitor.visit(this);\n    (0, utils_1.forEach)(this.definition, function (prod) {\n      prod.accept(visitor);\n    });\n  };\n\n  return AbstractProduction;\n}();\n\nexports.AbstractProduction = AbstractProduction;\n\nvar NonTerminal =\n/** @class */\nfunction (_super) {\n  __extends(NonTerminal, _super);\n\n  function NonTerminal(options) {\n    var _this = _super.call(this, []) || this;\n\n    _this.idx = 1;\n    (0, utils_1.assign)(_this, (0, utils_1.pick)(options, function (v) {\n      return v !== undefined;\n    }));\n    return _this;\n  }\n\n  Object.defineProperty(NonTerminal.prototype, \"definition\", {\n    get: function get() {\n      if (this.referencedRule !== undefined) {\n        return this.referencedRule.definition;\n      }\n\n      return [];\n    },\n    set: function set(definition) {// immutable\n    },\n    enumerable: false,\n    configurable: true\n  });\n\n  NonTerminal.prototype.accept = function (visitor) {\n    visitor.visit(this); // don't visit children of a reference, we will get cyclic infinite loops if we do so\n  };\n\n  return NonTerminal;\n}(AbstractProduction);\n\nexports.NonTerminal = NonTerminal;\n\nvar Rule =\n/** @class */\nfunction (_super) {\n  __extends(Rule, _super);\n\n  function Rule(options) {\n    var _this = _super.call(this, options.definition) || this;\n\n    _this.orgText = \"\";\n    (0, utils_1.assign)(_this, (0, utils_1.pick)(options, function (v) {\n      return v !== undefined;\n    }));\n    return _this;\n  }\n\n  return Rule;\n}(AbstractProduction);\n\nexports.Rule = Rule;\n\nvar Alternative =\n/** @class */\nfunction (_super) {\n  __extends(Alternative, _super);\n\n  function Alternative(options) {\n    var _this = _super.call(this, options.definition) || this;\n\n    _this.ignoreAmbiguities = false;\n    (0, utils_1.assign)(_this, (0, utils_1.pick)(options, function (v) {\n      return v !== undefined;\n    }));\n    return _this;\n  }\n\n  return Alternative;\n}(AbstractProduction);\n\nexports.Alternative = Alternative;\n\nvar Option =\n/** @class */\nfunction (_super) {\n  __extends(Option, _super);\n\n  function Option(options) {\n    var _this = _super.call(this, options.definition) || this;\n\n    _this.idx = 1;\n    (0, utils_1.assign)(_this, (0, utils_1.pick)(options, function (v) {\n      return v !== undefined;\n    }));\n    return _this;\n  }\n\n  return Option;\n}(AbstractProduction);\n\nexports.Option = Option;\n\nvar RepetitionMandatory =\n/** @class */\nfunction (_super) {\n  __extends(RepetitionMandatory, _super);\n\n  function RepetitionMandatory(options) {\n    var _this = _super.call(this, options.definition) || this;\n\n    _this.idx = 1;\n    (0, utils_1.assign)(_this, (0, utils_1.pick)(options, function (v) {\n      return v !== undefined;\n    }));\n    return _this;\n  }\n\n  return RepetitionMandatory;\n}(AbstractProduction);\n\nexports.RepetitionMandatory = RepetitionMandatory;\n\nvar RepetitionMandatoryWithSeparator =\n/** @class */\nfunction (_super) {\n  __extends(RepetitionMandatoryWithSeparator, _super);\n\n  function RepetitionMandatoryWithSeparator(options) {\n    var _this = _super.call(this, options.definition) || this;\n\n    _this.idx = 1;\n    (0, utils_1.assign)(_this, (0, utils_1.pick)(options, function (v) {\n      return v !== undefined;\n    }));\n    return _this;\n  }\n\n  return RepetitionMandatoryWithSeparator;\n}(AbstractProduction);\n\nexports.RepetitionMandatoryWithSeparator = RepetitionMandatoryWithSeparator;\n\nvar Repetition =\n/** @class */\nfunction (_super) {\n  __extends(Repetition, _super);\n\n  function Repetition(options) {\n    var _this = _super.call(this, options.definition) || this;\n\n    _this.idx = 1;\n    (0, utils_1.assign)(_this, (0, utils_1.pick)(options, function (v) {\n      return v !== undefined;\n    }));\n    return _this;\n  }\n\n  return Repetition;\n}(AbstractProduction);\n\nexports.Repetition = Repetition;\n\nvar RepetitionWithSeparator =\n/** @class */\nfunction (_super) {\n  __extends(RepetitionWithSeparator, _super);\n\n  function RepetitionWithSeparator(options) {\n    var _this = _super.call(this, options.definition) || this;\n\n    _this.idx = 1;\n    (0, utils_1.assign)(_this, (0, utils_1.pick)(options, function (v) {\n      return v !== undefined;\n    }));\n    return _this;\n  }\n\n  return RepetitionWithSeparator;\n}(AbstractProduction);\n\nexports.RepetitionWithSeparator = RepetitionWithSeparator;\n\nvar Alternation =\n/** @class */\nfunction (_super) {\n  __extends(Alternation, _super);\n\n  function Alternation(options) {\n    var _this = _super.call(this, options.definition) || this;\n\n    _this.idx = 1;\n    _this.ignoreAmbiguities = false;\n    _this.hasPredicates = false;\n    (0, utils_1.assign)(_this, (0, utils_1.pick)(options, function (v) {\n      return v !== undefined;\n    }));\n    return _this;\n  }\n\n  Object.defineProperty(Alternation.prototype, \"definition\", {\n    get: function get() {\n      return this._definition;\n    },\n    set: function set(value) {\n      this._definition = value;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  return Alternation;\n}(AbstractProduction);\n\nexports.Alternation = Alternation;\n\nvar Terminal =\n/** @class */\nfunction () {\n  function Terminal(options) {\n    this.idx = 1;\n    (0, utils_1.assign)(this, (0, utils_1.pick)(options, function (v) {\n      return v !== undefined;\n    }));\n  }\n\n  Terminal.prototype.accept = function (visitor) {\n    visitor.visit(this);\n  };\n\n  return Terminal;\n}();\n\nexports.Terminal = Terminal;\n\nfunction serializeGrammar(topRules) {\n  return (0, utils_1.map)(topRules, serializeProduction);\n}\n\nexports.serializeGrammar = serializeGrammar;\n\nfunction serializeProduction(node) {\n  function convertDefinition(definition) {\n    return (0, utils_1.map)(definition, serializeProduction);\n  }\n  /* istanbul ignore else */\n\n\n  if (node instanceof NonTerminal) {\n    var serializedNonTerminal = {\n      type: \"NonTerminal\",\n      name: node.nonTerminalName,\n      idx: node.idx\n    };\n\n    if ((0, utils_1.isString)(node.label)) {\n      serializedNonTerminal.label = node.label;\n    }\n\n    return serializedNonTerminal;\n  } else if (node instanceof Alternative) {\n    return {\n      type: \"Alternative\",\n      definition: convertDefinition(node.definition)\n    };\n  } else if (node instanceof Option) {\n    return {\n      type: \"Option\",\n      idx: node.idx,\n      definition: convertDefinition(node.definition)\n    };\n  } else if (node instanceof RepetitionMandatory) {\n    return {\n      type: \"RepetitionMandatory\",\n      idx: node.idx,\n      definition: convertDefinition(node.definition)\n    };\n  } else if (node instanceof RepetitionMandatoryWithSeparator) {\n    return {\n      type: \"RepetitionMandatoryWithSeparator\",\n      idx: node.idx,\n      separator: serializeProduction(new Terminal({\n        terminalType: node.separator\n      })),\n      definition: convertDefinition(node.definition)\n    };\n  } else if (node instanceof RepetitionWithSeparator) {\n    return {\n      type: \"RepetitionWithSeparator\",\n      idx: node.idx,\n      separator: serializeProduction(new Terminal({\n        terminalType: node.separator\n      })),\n      definition: convertDefinition(node.definition)\n    };\n  } else if (node instanceof Repetition) {\n    return {\n      type: \"Repetition\",\n      idx: node.idx,\n      definition: convertDefinition(node.definition)\n    };\n  } else if (node instanceof Alternation) {\n    return {\n      type: \"Alternation\",\n      idx: node.idx,\n      definition: convertDefinition(node.definition)\n    };\n  } else if (node instanceof Terminal) {\n    var serializedTerminal = {\n      type: \"Terminal\",\n      name: node.terminalType.name,\n      label: (0, tokens_public_1.tokenLabel)(node.terminalType),\n      idx: node.idx\n    };\n\n    if ((0, utils_1.isString)(node.label)) {\n      serializedTerminal.terminalLabel = node.label;\n    }\n\n    var pattern = node.terminalType.PATTERN;\n\n    if (node.terminalType.PATTERN) {\n      serializedTerminal.pattern = (0, utils_1.isRegExp)(pattern) ? pattern.source : pattern;\n    }\n\n    return serializedTerminal;\n  } else if (node instanceof Rule) {\n    return {\n      type: \"Rule\",\n      name: node.name,\n      orgText: node.orgText,\n      definition: convertDefinition(node.definition)\n    };\n  } else {\n    throw Error(\"non exhaustive match\");\n  }\n}\n\nexports.serializeProduction = serializeProduction;","map":{"version":3,"sources":["../../../../../src/parse/grammar/gast/gast_public.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.serializeProduction = exports.serializeGrammar = exports.Terminal = exports.Alternation = exports.RepetitionWithSeparator = exports.Repetition = exports.RepetitionMandatoryWithSeparator = exports.RepetitionMandatory = exports.Option = exports.Alternative = exports.Rule = exports.NonTerminal = exports.AbstractProduction = void 0;\nvar utils_1 = require(\"@chevrotain/utils\");\nvar tokens_public_1 = require(\"../../../scan/tokens_public\");\nvar AbstractProduction = /** @class */ (function () {\n    function AbstractProduction(_definition) {\n        this._definition = _definition;\n    }\n    Object.defineProperty(AbstractProduction.prototype, \"definition\", {\n        get: function () {\n            return this._definition;\n        },\n        set: function (value) {\n            this._definition = value;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    AbstractProduction.prototype.accept = function (visitor) {\n        visitor.visit(this);\n        (0, utils_1.forEach)(this.definition, function (prod) {\n            prod.accept(visitor);\n        });\n    };\n    return AbstractProduction;\n}());\nexports.AbstractProduction = AbstractProduction;\nvar NonTerminal = /** @class */ (function (_super) {\n    __extends(NonTerminal, _super);\n    function NonTerminal(options) {\n        var _this = _super.call(this, []) || this;\n        _this.idx = 1;\n        (0, utils_1.assign)(_this, (0, utils_1.pick)(options, function (v) { return v !== undefined; }));\n        return _this;\n    }\n    Object.defineProperty(NonTerminal.prototype, \"definition\", {\n        get: function () {\n            if (this.referencedRule !== undefined) {\n                return this.referencedRule.definition;\n            }\n            return [];\n        },\n        set: function (definition) {\n            // immutable\n        },\n        enumerable: false,\n        configurable: true\n    });\n    NonTerminal.prototype.accept = function (visitor) {\n        visitor.visit(this);\n        // don't visit children of a reference, we will get cyclic infinite loops if we do so\n    };\n    return NonTerminal;\n}(AbstractProduction));\nexports.NonTerminal = NonTerminal;\nvar Rule = /** @class */ (function (_super) {\n    __extends(Rule, _super);\n    function Rule(options) {\n        var _this = _super.call(this, options.definition) || this;\n        _this.orgText = \"\";\n        (0, utils_1.assign)(_this, (0, utils_1.pick)(options, function (v) { return v !== undefined; }));\n        return _this;\n    }\n    return Rule;\n}(AbstractProduction));\nexports.Rule = Rule;\nvar Alternative = /** @class */ (function (_super) {\n    __extends(Alternative, _super);\n    function Alternative(options) {\n        var _this = _super.call(this, options.definition) || this;\n        _this.ignoreAmbiguities = false;\n        (0, utils_1.assign)(_this, (0, utils_1.pick)(options, function (v) { return v !== undefined; }));\n        return _this;\n    }\n    return Alternative;\n}(AbstractProduction));\nexports.Alternative = Alternative;\nvar Option = /** @class */ (function (_super) {\n    __extends(Option, _super);\n    function Option(options) {\n        var _this = _super.call(this, options.definition) || this;\n        _this.idx = 1;\n        (0, utils_1.assign)(_this, (0, utils_1.pick)(options, function (v) { return v !== undefined; }));\n        return _this;\n    }\n    return Option;\n}(AbstractProduction));\nexports.Option = Option;\nvar RepetitionMandatory = /** @class */ (function (_super) {\n    __extends(RepetitionMandatory, _super);\n    function RepetitionMandatory(options) {\n        var _this = _super.call(this, options.definition) || this;\n        _this.idx = 1;\n        (0, utils_1.assign)(_this, (0, utils_1.pick)(options, function (v) { return v !== undefined; }));\n        return _this;\n    }\n    return RepetitionMandatory;\n}(AbstractProduction));\nexports.RepetitionMandatory = RepetitionMandatory;\nvar RepetitionMandatoryWithSeparator = /** @class */ (function (_super) {\n    __extends(RepetitionMandatoryWithSeparator, _super);\n    function RepetitionMandatoryWithSeparator(options) {\n        var _this = _super.call(this, options.definition) || this;\n        _this.idx = 1;\n        (0, utils_1.assign)(_this, (0, utils_1.pick)(options, function (v) { return v !== undefined; }));\n        return _this;\n    }\n    return RepetitionMandatoryWithSeparator;\n}(AbstractProduction));\nexports.RepetitionMandatoryWithSeparator = RepetitionMandatoryWithSeparator;\nvar Repetition = /** @class */ (function (_super) {\n    __extends(Repetition, _super);\n    function Repetition(options) {\n        var _this = _super.call(this, options.definition) || this;\n        _this.idx = 1;\n        (0, utils_1.assign)(_this, (0, utils_1.pick)(options, function (v) { return v !== undefined; }));\n        return _this;\n    }\n    return Repetition;\n}(AbstractProduction));\nexports.Repetition = Repetition;\nvar RepetitionWithSeparator = /** @class */ (function (_super) {\n    __extends(RepetitionWithSeparator, _super);\n    function RepetitionWithSeparator(options) {\n        var _this = _super.call(this, options.definition) || this;\n        _this.idx = 1;\n        (0, utils_1.assign)(_this, (0, utils_1.pick)(options, function (v) { return v !== undefined; }));\n        return _this;\n    }\n    return RepetitionWithSeparator;\n}(AbstractProduction));\nexports.RepetitionWithSeparator = RepetitionWithSeparator;\nvar Alternation = /** @class */ (function (_super) {\n    __extends(Alternation, _super);\n    function Alternation(options) {\n        var _this = _super.call(this, options.definition) || this;\n        _this.idx = 1;\n        _this.ignoreAmbiguities = false;\n        _this.hasPredicates = false;\n        (0, utils_1.assign)(_this, (0, utils_1.pick)(options, function (v) { return v !== undefined; }));\n        return _this;\n    }\n    Object.defineProperty(Alternation.prototype, \"definition\", {\n        get: function () {\n            return this._definition;\n        },\n        set: function (value) {\n            this._definition = value;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return Alternation;\n}(AbstractProduction));\nexports.Alternation = Alternation;\nvar Terminal = /** @class */ (function () {\n    function Terminal(options) {\n        this.idx = 1;\n        (0, utils_1.assign)(this, (0, utils_1.pick)(options, function (v) { return v !== undefined; }));\n    }\n    Terminal.prototype.accept = function (visitor) {\n        visitor.visit(this);\n    };\n    return Terminal;\n}());\nexports.Terminal = Terminal;\nfunction serializeGrammar(topRules) {\n    return (0, utils_1.map)(topRules, serializeProduction);\n}\nexports.serializeGrammar = serializeGrammar;\nfunction serializeProduction(node) {\n    function convertDefinition(definition) {\n        return (0, utils_1.map)(definition, serializeProduction);\n    }\n    /* istanbul ignore else */\n    if (node instanceof NonTerminal) {\n        var serializedNonTerminal = {\n            type: \"NonTerminal\",\n            name: node.nonTerminalName,\n            idx: node.idx\n        };\n        if ((0, utils_1.isString)(node.label)) {\n            serializedNonTerminal.label = node.label;\n        }\n        return serializedNonTerminal;\n    }\n    else if (node instanceof Alternative) {\n        return {\n            type: \"Alternative\",\n            definition: convertDefinition(node.definition)\n        };\n    }\n    else if (node instanceof Option) {\n        return {\n            type: \"Option\",\n            idx: node.idx,\n            definition: convertDefinition(node.definition)\n        };\n    }\n    else if (node instanceof RepetitionMandatory) {\n        return {\n            type: \"RepetitionMandatory\",\n            idx: node.idx,\n            definition: convertDefinition(node.definition)\n        };\n    }\n    else if (node instanceof RepetitionMandatoryWithSeparator) {\n        return {\n            type: \"RepetitionMandatoryWithSeparator\",\n            idx: node.idx,\n            separator: (serializeProduction(new Terminal({ terminalType: node.separator }))),\n            definition: convertDefinition(node.definition)\n        };\n    }\n    else if (node instanceof RepetitionWithSeparator) {\n        return {\n            type: \"RepetitionWithSeparator\",\n            idx: node.idx,\n            separator: (serializeProduction(new Terminal({ terminalType: node.separator }))),\n            definition: convertDefinition(node.definition)\n        };\n    }\n    else if (node instanceof Repetition) {\n        return {\n            type: \"Repetition\",\n            idx: node.idx,\n            definition: convertDefinition(node.definition)\n        };\n    }\n    else if (node instanceof Alternation) {\n        return {\n            type: \"Alternation\",\n            idx: node.idx,\n            definition: convertDefinition(node.definition)\n        };\n    }\n    else if (node instanceof Terminal) {\n        var serializedTerminal = {\n            type: \"Terminal\",\n            name: node.terminalType.name,\n            label: (0, tokens_public_1.tokenLabel)(node.terminalType),\n            idx: node.idx\n        };\n        if ((0, utils_1.isString)(node.label)) {\n            serializedTerminal.terminalLabel = node.label;\n        }\n        var pattern = node.terminalType.PATTERN;\n        if (node.terminalType.PATTERN) {\n            serializedTerminal.pattern = (0, utils_1.isRegExp)(pattern)\n                ? pattern.source\n                : pattern;\n        }\n        return serializedTerminal;\n    }\n    else if (node instanceof Rule) {\n        return {\n            type: \"Rule\",\n            name: node.name,\n            orgText: node.orgText,\n            definition: convertDefinition(node.definition)\n        };\n    }\n    else {\n        throw Error(\"non exhaustive match\");\n    }\n}\nexports.serializeProduction = serializeProduction;\n//# sourceMappingURL=gast_public.js.map"]},"metadata":{},"sourceType":"script"}