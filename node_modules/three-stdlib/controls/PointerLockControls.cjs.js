"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("@babel/runtime/helpers/defineProperty"),t=require("three");function o(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var n=o(e);class i extends t.EventDispatcher{constructor(e,o){super(),n.default(this,"camera",void 0),n.default(this,"domElement",void 0),n.default(this,"isLocked",!1),n.default(this,"minPolarAngle",0),n.default(this,"maxPolarAngle",Math.PI),n.default(this,"changeEvent",{type:"change"}),n.default(this,"lockEvent",{type:"lock"}),n.default(this,"unlockEvent",{type:"unlock"}),n.default(this,"euler",new t.Euler(0,0,0,"YXZ")),n.default(this,"PI_2",Math.PI/2),n.default(this,"vec",new t.Vector3),n.default(this,"onMouseMove",(e=>{if(!1===this.isLocked)return;const t=e.movementX||e.mozMovementX||e.webkitMovementX||0,o=e.movementY||e.mozMovementY||e.webkitMovementY||0;this.euler.setFromQuaternion(this.camera.quaternion),this.euler.y-=.002*t,this.euler.x-=.002*o,this.euler.x=Math.max(this.PI_2-this.maxPolarAngle,Math.min(this.PI_2-this.minPolarAngle,this.euler.x)),this.camera.quaternion.setFromEuler(this.euler),this.dispatchEvent(this.changeEvent)})),n.default(this,"onPointerlockChange",(()=>{this.domElement.ownerDocument.pointerLockElement===this.domElement?(this.dispatchEvent(this.lockEvent),this.isLocked=!0):(this.dispatchEvent(this.unlockEvent),this.isLocked=!1)})),n.default(this,"onPointerlockError",(()=>{console.error("THREE.PointerLockControls: Unable to use Pointer Lock API")})),n.default(this,"connect",(()=>{this.domElement.ownerDocument.addEventListener("mousemove",this.onMouseMove),this.domElement.ownerDocument.addEventListener("pointerlockchange",this.onPointerlockChange),this.domElement.ownerDocument.addEventListener("pointerlockerror",this.onPointerlockError)})),n.default(this,"disconnect",(()=>{this.domElement.ownerDocument.removeEventListener("mousemove",this.onMouseMove),this.domElement.ownerDocument.removeEventListener("pointerlockchange",this.onPointerlockChange),this.domElement.ownerDocument.removeEventListener("pointerlockerror",this.onPointerlockError)})),n.default(this,"dispose",(()=>{this.disconnect()})),n.default(this,"getObject",(()=>this.camera)),n.default(this,"direction",new t.Vector3(0,0,-1)),n.default(this,"getDirection",(e=>e.copy(this.direction).applyQuaternion(this.camera.quaternion))),n.default(this,"moveForward",(e=>{this.vec.setFromMatrixColumn(this.camera.matrix,0),this.vec.crossVectors(this.camera.up,this.vec),this.camera.position.addScaledVector(this.vec,e)})),n.default(this,"moveRight",(e=>{this.vec.setFromMatrixColumn(this.camera.matrix,0),this.camera.position.addScaledVector(this.vec,e)})),n.default(this,"lock",(()=>{this.domElement.requestPointerLock()})),n.default(this,"unlock",(()=>{this.domElement.ownerDocument.exitPointerLock()})),void 0===o&&(console.warn('THREE.PointerLockControls: The second parameter "domElement" is now mandatory.'),o=document.body),this.domElement=o,this.camera=e,this.connect()}}exports.PointerLockControls=i;
