{"ast":null,"code":"var _jsxFileName = \"/Users/dominiclee/Desktop/ethprojs/metaportal/src/components/TokensList/TokensList.tsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$(),\n    _s3 = $RefreshSig$(),\n    _s4 = $RefreshSig$();\n\nimport { formatUnits } from '@ethersproject/units';\nimport uniswapToken from '@uniswap/default-token-list';\nimport { ERC20Interface, useContractCall, useContractCalls, useEthers } from '@usedapp/core';\nimport React, { useEffect, useState } from 'react';\nimport { ERC1155Interface } from '../../interfaces/interfaces';\nimport styled from 'styled-components';\nimport { Colors } from '../../global/styles';\nimport { TextBold } from '../../typography/Text';\nimport { Col, Container, Row } from 'react-bootstrap';\nimport { TokenSVGIcon } from './TokenSVGIcon';\nimport { useAppSelector, useAppDispatch } from '../../hooks';\nimport { updatedSelectedItem } from './SelectedItemSlice';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst initBadges = [];\nexport const getTransactionsFor = async signerAddress => {\n  console.log('signer address : ', signerAddress);\n  const COVALENT_API_KEY = \"ckey_4aed01d0d6e248a7a4ab27acb8a\";\n  const COVALENT_MAINNET = {\n    url: \"https://api.covalenthq.com/v1/1/\"\n  };\n  const transactionsForAddress = `${COVALENT_MAINNET.url}address/${signerAddress}/transactions_v2/?key=${COVALENT_API_KEY}`; // Make a request for a user with a given ID\n\n  return axios.get(transactionsForAddress).then(function (response) {\n    // handle success\n    return response;\n  }).catch(function (error) {\n    // handle error\n    console.log(error);\n    return null;\n  });\n};\nexport const parseResponseForItems = response => {\n  if (!response || !response.data || !response.data.data) {\n    return null;\n  }\n\n  return response.data.data.items;\n};\n\nfunction getTokenList(chainId) {\n  return uniswapToken.tokens.filter(token => token.chainId == chainId);\n}\n\nfunction useTokensBalance(tokenList, account) {\n  _s();\n\n  return useContractCalls(tokenList && account ? tokenList.map(token => ({\n    abi: ERC20Interface,\n    address: token.address,\n    method: 'balanceOf',\n    args: [account]\n  })) : []);\n}\n\n_s(useTokensBalance, \"6ND4zfY5dHBkBF1VdG9KQUxd1bQ=\", false, function () {\n  return [useContractCalls];\n});\n\nexport function useERC1155TokenBalance(tokenAddress, addresses, tokenIds) {\n  _s2();\n\n  var _useContractCall;\n\n  const [tokenBalances] = (_useContractCall = useContractCall(addresses && tokenAddress && {\n    abi: ERC1155Interface,\n    address: tokenAddress,\n    method: 'balanceOfBatch',\n    args: [addresses, tokenIds]\n  })) !== null && _useContractCall !== void 0 ? _useContractCall : [];\n  return tokenBalances;\n}\n\n_s2(useERC1155TokenBalance, \"CyeqBowMBQuAu1HzqGLZIvpyK4g=\", false, function () {\n  return [useContractCall];\n});\n\nfunction useERC1155TokenBalances(tokenAddresses, addresses, tokenIds) {\n  _s3();\n\n  return useContractCalls(tokenAddresses && addresses ? tokenAddresses.map(tokenAddress => ({\n    abi: ERC1155Interface,\n    address: tokenAddress,\n    method: 'balanceOfBatch',\n    args: [addresses, tokenIds]\n  })) : []);\n}\n\n_s3(useERC1155TokenBalances, \"6ND4zfY5dHBkBF1VdG9KQUxd1bQ=\", false, function () {\n  return [useContractCalls];\n});\n\nexport function TokensList() {\n  _s4();\n\n  const {\n    chainId,\n    account\n  } = useEthers();\n  const tokenList = getTokenList(chainId); // const balances = useTokensBalance(tokenList, account);\n\n  const [badges, setBadges] = useState(initBadges);\n  let mountedRef = true;\n  useEffect(() => {\n    const doAsync = async () => {\n      console.log('account : ', account);\n\n      if (!account || account === undefined) {\n        return;\n      }\n\n      console.log('awaiting response....');\n      const response = await getTransactionsFor('0x2500214f8c6AD68e9314E3f74A91F28789B24A70');\n      console.log('axios : ', response);\n\n      if (!response) {\n        return;\n      }\n\n      const items = parseResponseForItems(response);\n\n      if (!items) {\n        return;\n      }\n\n      loadBadges(items);\n      console.log('items : ', items);\n    };\n\n    doAsync(); // if(mountedRef) {\n    //   doAsync();\n    // }\n    // return () => {\n    //   mountedRef = false;\n    // }; \n  }, []);\n  const selectedItemIndex = useAppSelector(state => {\n    return state.selectedItem.index;\n  });\n  const dispatch = useAppDispatch();\n\n  const handleItemSelect = (index, balance, holders, name, address) => {\n    dispatch(updatedSelectedItem({\n      index: index,\n      balance: balance,\n      holders: holders,\n      name: name,\n      address: address\n    }));\n  };\n\n  const loadBadges = transactionItems => {\n    const sectionBadge1 = {\n      section: 'AllActivity',\n      items: transactionItems\n    };\n    setBadges([sectionBadge1]);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: !badges ? /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"Loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 19\n    }, this) : /*#__PURE__*/_jsxDEV(\"ul\", {\n      children: badges.map((section, idx) => {\n        return /*#__PURE__*/_jsxDEV(\"li\", {\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(Container, {\n              children: /*#__PURE__*/_jsxDEV(Row, {\n                children: section.items && section.items.map((sectionItem, idx) => /*#__PURE__*/_jsxDEV(Col, {\n                  children: /*#__PURE__*/_jsxDEV(TokenItem, {\n                    children: [/*#__PURE__*/_jsxDEV(TokenIconContainer, {\n                      onClick: () => handleItemSelect(idx, idx, 11, `Element ${idx}`, 'address'),\n                      children: [/*#__PURE__*/_jsxDEV(TokenSVGIcon, {\n                        src: '',\n                        alt: ''\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 182,\n                        columnNumber: 31\n                      }, this), /*#__PURE__*/_jsxDEV(TokenBalance, {\n                        children: formatUnits(0)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 183,\n                        columnNumber: 31\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 181,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(TokenName, {\n                      children: [\"Badge Name \", idx]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 187,\n                      columnNumber: 29\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 180,\n                    columnNumber: 29\n                  }, this)\n                }, `SubSection-${idx}`, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 179,\n                  columnNumber: 27\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 176,\n                columnNumber: 15\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 175,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 174,\n            columnNumber: 15\n          }, this)\n        }, `parentSection-${idx}`, false, {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 15\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 168,\n    columnNumber: 5\n  }, this);\n}\n\n_s4(TokensList, \"MQvFEOnOe88R0QOeNWQY/1PpGk4=\", false, function () {\n  return [useEthers, useAppSelector, useAppDispatch];\n});\n\n_c = TokensList;\nconst List = styled.ul`\n`;\nconst ListItem = styled.li`\n`;\nconst TokenItem = styled.li`\n  display: flex;\n  flex-direction: column;\n`;\n_c2 = TokenItem;\nconst TokenIconContainer = styled.div`\n  display: flex;\n  justify-content: center;\n  width: 120px;\n  height:120px;\n  margin: 0.2em;\n  border: 1px solid #ebebeb};\n  background: rgb(60, 60, 60);\n  background: rgba(149, 149, 149, 0.4);\n  position: relative;\n\n  &:hover,\n  &:focus, \n  &:active {\n    color: ${Colors.Yellow[100]};\n    border-width: medium;\n    border-color: ${Colors.Yellow[100]};\n  }\n`;\n_c3 = TokenIconContainer;\nconst TokenName = styled(TextBold)`\n  margin-left: 4px;\n  font-size: 12px;\n\n`;\n_c4 = TokenName;\nconst TokenTicker = styled(TextBold)`\n  grid-area: ticker;\n  color: ${Colors.Gray[600]};\n`;\nconst TokenBalance = styled(TextBold)`\n  position: absolute;\n  bottom: 0;\n  right: 0;\n  padding:0.25em;\n  font-size: 15px;\n`;\n_c5 = TokenBalance;\n\nvar _c, _c2, _c3, _c4, _c5;\n\n$RefreshReg$(_c, \"TokensList\");\n$RefreshReg$(_c2, \"TokenItem\");\n$RefreshReg$(_c3, \"TokenIconContainer\");\n$RefreshReg$(_c4, \"TokenName\");\n$RefreshReg$(_c5, \"TokenBalance\");","map":{"version":3,"sources":["/Users/dominiclee/Desktop/ethprojs/metaportal/src/components/TokensList/TokensList.tsx"],"names":["formatUnits","uniswapToken","ERC20Interface","useContractCall","useContractCalls","useEthers","React","useEffect","useState","ERC1155Interface","styled","Colors","TextBold","Col","Container","Row","TokenSVGIcon","useAppSelector","useAppDispatch","updatedSelectedItem","axios","initBadges","getTransactionsFor","signerAddress","console","log","COVALENT_API_KEY","COVALENT_MAINNET","url","transactionsForAddress","get","then","response","catch","error","parseResponseForItems","data","items","getTokenList","chainId","tokens","filter","token","useTokensBalance","tokenList","account","map","abi","address","method","args","useERC1155TokenBalance","tokenAddress","addresses","tokenIds","tokenBalances","useERC1155TokenBalances","tokenAddresses","TokensList","badges","setBadges","mountedRef","doAsync","undefined","loadBadges","selectedItemIndex","state","selectedItem","index","dispatch","handleItemSelect","balance","holders","name","transactionItems","sectionBadge1","section","idx","sectionItem","List","ul","ListItem","li","TokenItem","TokenIconContainer","div","Yellow","TokenName","TokenTicker","Gray","TokenBalance"],"mappings":";;;;;;AAAA,SAASA,WAAT,QAA4B,sBAA5B;AACA,OAAOC,YAAP,MAAyB,6BAAzB;AACA,SAAkBC,cAAlB,EAAkCC,eAAlC,EAAmDC,gBAAnD,EAAqEC,SAArE,QAAsF,eAAtF;AACA,OAAOC,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,SAASC,gBAAT,QAAiC,6BAAjC;AACA,OAAOC,MAAP,MAAmB,mBAAnB;AACA,SAASC,MAAT,QAAuB,qBAAvB;AACA,SAASC,QAAT,QAAyB,uBAAzB;AAEA,SAASC,GAAT,EAAcC,SAAd,EAAyBC,GAAzB,QAAoC,iBAApC;AACA,SAASC,YAAT,QAA6B,gBAA7B;AACA,SAASC,cAAT,EAAyBC,cAAzB,QAA+C,aAA/C;AAEA,SAASC,mBAAT,QAAoC,qBAApC;AAEA,OAAOC,KAAP,MAAqC,OAArC;;AAEA,MAAMC,UAAiB,GAAG,EAA1B;AAEA,OAAO,MAAMC,kBAAkB,GAAG,MAAOC,aAAP,IAA6D;AAC7FC,EAAAA,OAAO,CAACC,GAAR,CAAY,mBAAZ,EAAgCF,aAAhC;AACA,QAAMG,gBAAgB,GAAG,kCAAzB;AACA,QAAMC,gBAAgB,GAAG;AACvBC,IAAAA,GAAG,EAAE;AADkB,GAAzB;AAIA,QAAMC,sBAAsB,GAC3B,GAAEF,gBAAgB,CAACC,GAAI,WAAUL,aAAc,yBAAwBG,gBAAiB,EADzF,CAP6F,CAW7F;;AACA,SAAON,KAAK,CAACU,GAAN,CAAUD,sBAAV,EACJE,IADI,CACC,UAAUC,QAAV,EAAoB;AACxB;AACA,WAAOA,QAAP;AACD,GAJI,EAKJC,KALI,CAKE,UAAUC,KAAV,EAAiB;AACtB;AACAV,IAAAA,OAAO,CAACC,GAAR,CAAYS,KAAZ;AAEA,WAAO,IAAP;AACD,GAVI,CAAP;AAWD,CAvBM;AA0BP,OAAO,MAAMC,qBAAqB,GAAGH,QAAD,IAA2C;AAC7E,MAAG,CAACA,QAAD,IAAa,CAACA,QAAQ,CAACI,IAAvB,IAA+B,CAACJ,QAAQ,CAACI,IAAT,CAAcA,IAAjD,EAAuD;AACrD,WAAO,IAAP;AACD;;AACD,SAAOJ,QAAQ,CAACI,IAAT,CAAcA,IAAd,CAAmBC,KAA1B;AACD,CALM;;AAQP,SAASC,YAAT,CAAsBC,OAAtB,EAAyC;AACvC,SAAOtC,YAAY,CAACuC,MAAb,CAAoBC,MAApB,CAA4BC,KAAD,IAAWA,KAAK,CAACH,OAAN,IAAiBA,OAAvD,CAAP;AACD;;AAED,SAASI,gBAAT,CAA0BC,SAA1B,EAA4CC,OAA5C,EAAqE;AAAA;;AACnE,SAAOzC,gBAAgB,CACrBwC,SAAS,IAAIC,OAAb,GACID,SAAS,CAACE,GAAV,CAAeJ,KAAD,KAAiB;AAC7BK,IAAAA,GAAG,EAAE7C,cADwB;AAE7B8C,IAAAA,OAAO,EAAEN,KAAK,CAACM,OAFc;AAG7BC,IAAAA,MAAM,EAAE,WAHqB;AAI7BC,IAAAA,IAAI,EAAE,CAACL,OAAD;AAJuB,GAAjB,CAAd,CADJ,GAOI,EARiB,CAAvB;AAUD;;GAXQF,gB;UACAvC,gB;;;AAYT,OAAO,SAAS+C,sBAAT,CAAgCC,YAAhC,EAAuDC,SAAvD,EAA6FC,QAA7F,EAAwH;AAAA;;AAAA;;AAC7H,QAAM,CAACC,aAAD,wBACJpD,eAAe,CACXkD,SAAS,IACTD,YADA,IACgB;AACdL,IAAAA,GAAG,EAAEtC,gBADS;AAEduC,IAAAA,OAAO,EAAEI,YAFK;AAGdH,IAAAA,MAAM,EAAE,gBAHM;AAIdC,IAAAA,IAAI,EAAE,CAACG,SAAD,EAAYC,QAAZ;AAJQ,GAFL,CADX,+DASC,EATP;AAUA,SAAOC,aAAP;AACD;;IAZeJ,sB;UAEZhD,e;;;AAYJ,SAASqD,uBAAT,CAAiCC,cAAjC,EAA2DJ,SAA3D,EAAiGC,QAAjG,EAA4H;AAAA;;AAC1H,SAAOlD,gBAAgB,CACrBqD,cAAc,IAAIJ,SAAlB,GACII,cAAc,CAACX,GAAf,CAAoBM,YAAD,KAAwB;AACzCL,IAAAA,GAAG,EAAEtC,gBADoC;AAEzCuC,IAAAA,OAAO,EAAEI,YAFgC;AAGzCH,IAAAA,MAAM,EAAE,gBAHiC;AAIzCC,IAAAA,IAAI,EAAE,CAACG,SAAD,EAAYC,QAAZ;AAJmC,GAAxB,CAAnB,CADJ,GAOI,EARiB,CAAvB;AAUD;;IAXQE,uB;UACApD,gB;;;AAYT,OAAO,SAASsD,UAAT,GAAsB;AAAA;;AAC3B,QAAM;AAAEnB,IAAAA,OAAF;AAAWM,IAAAA;AAAX,MAAuBxC,SAAS,EAAtC;AACA,QAAMuC,SAAS,GAAGN,YAAY,CAACC,OAAD,CAA9B,CAF2B,CAG3B;;AACA,QAAM,CAACoB,MAAD,EAASC,SAAT,IAAsBpD,QAAQ,CAACa,UAAD,CAApC;AACA,MAAIwC,UAAU,GAAG,IAAjB;AAEAtD,EAAAA,SAAS,CAAC,MAAM;AACd,UAAMuD,OAAO,GAAG,YAAY;AAC1BtC,MAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ,EAAyBoB,OAAzB;;AACA,UAAG,CAACA,OAAD,IAAYA,OAAO,KAAKkB,SAA3B,EAAqC;AACnC;AACD;;AACDvC,MAAAA,OAAO,CAACC,GAAR,CAAY,uBAAZ;AACD,YAAMO,QAAQ,GAAI,MAAMV,kBAAkB,CAAC,4CAAD,CAA1C;AACAE,MAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ,EAAuBO,QAAvB;;AAEC,UAAG,CAACA,QAAJ,EAAa;AACX;AACD;;AAED,YAAMK,KAAK,GAAGF,qBAAqB,CAACH,QAAD,CAAnC;;AACA,UAAG,CAACK,KAAJ,EAAW;AACT;AACD;;AACD2B,MAAAA,UAAU,CAAC3B,KAAD,CAAV;AAEAb,MAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ,EAAuBY,KAAvB;AACD,KApBD;;AAqBAyB,IAAAA,OAAO,GAtBO,CAuBd;AACA;AACA;AACA;AACA;AACA;AAED,GA9BQ,EA8BN,EA9BM,CAAT;AAkCE,QAAMG,iBAAiB,GAAGhD,cAAc,CAAEiD,KAAD,IAAW;AAClD,WAAOA,KAAK,CAACC,YAAN,CAAmBC,KAA1B;AACD,GAFuC,CAAxC;AAGA,QAAMC,QAAQ,GAAGnD,cAAc,EAA/B;;AAEA,QAAMoD,gBAAgB,GAAE,CAACF,KAAD,EAAgBG,OAAhB,EAAiCC,OAAjC,EAAiDC,IAAjD,EAA+DzB,OAA/D,KAAoF;AAE1GqB,IAAAA,QAAQ,CAAElD,mBAAmB,CAC3B;AACEiD,MAAAA,KAAK,EAAEA,KADT;AAEEG,MAAAA,OAAO,EAAEA,OAFX;AAGEC,MAAAA,OAAO,EAAEA,OAHX;AAIEC,MAAAA,IAAI,EAAEA,IAJR;AAKEzB,MAAAA,OAAO,EAAEA;AALX,KAD2B,CAArB,CAAR;AASD,GAXD;;AAcA,QAAMgB,UAAU,GAAGU,gBAAD,IAAmC;AACnD,UAAMC,aAAkB,GAAG;AACzBC,MAAAA,OAAO,EAAE,aADgB;AAEzBvC,MAAAA,KAAK,EAAEqC;AAFkB,KAA3B;AAIAd,IAAAA,SAAS,CAAC,CAACe,aAAD,CAAD,CAAT;AACD,GAND;;AASF,sBACE;AAAA,cACG,CAAChB,MAAD,gBAAW;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAAX,gBACC;AAAA,gBACCA,MAAM,CAACb,GAAP,CAAW,CAAC8B,OAAD,EAAeC,GAAf,KAA8B;AACpC,4BACA;AAAA,iCACA;AAAA,mCACA,QAAC,SAAD;AAAA,qCACA,QAAC,GAAD;AAAA,0BACGD,OAAO,CAACvC,KAAR,IACOuC,OAAO,CAACvC,KAAR,CAAcS,GAAd,CAAkB,CAACgC,WAAD,EAAmBD,GAAnB,kBAChB,QAAC,GAAD;AAAA,yCACE,QAAC,SAAD;AAAA,4CACA,QAAC,kBAAD;AAAoB,sBAAA,OAAO,EAAE,MAAMP,gBAAgB,CAACO,GAAD,EAAKA,GAAL,EAAU,EAAV,EAAc,WAAUA,GAAI,EAA5B,EAA8B,SAA9B,CAAnD;AAAA,8CACE,QAAC,YAAD;AAAc,wBAAA,GAAG,EAAE,EAAnB;AAAuB,wBAAA,GAAG,EAAE;AAA5B;AAAA;AAAA;AAAA;AAAA,8BADF,eAEE,QAAC,YAAD;AAAA,kCACG7E,WAAW,CAAC,CAAD;AADd;AAAA;AAAA;AAAA;AAAA,8BAFF;AAAA;AAAA;AAAA;AAAA;AAAA,4BADA,eAOA,QAAC,SAAD;AAAA,gDAAuB6E,GAAvB;AAAA;AAAA;AAAA;AAAA;AAAA,4BAPA;AAAA;AAAA;AAAA;AAAA;AAAA;AADF,mBAAW,cAAaA,GAAI,EAA5B;AAAA;AAAA;AAAA;AAAA,wBADF;AAFV;AAAA;AAAA;AAAA;AAAA;AADA;AAAA;AAAA;AAAA;AAAA;AADA;AAAA;AAAA;AAAA;AAAA;AADA,WAAU,iBAAgBA,GAAI,EAA9B;AAAA;AAAA;AAAA;AAAA,gBADA;AAuBF,OAxBH;AADD;AAAA;AAAA;AAAA;AAAA;AAFJ;AAAA;AAAA;AAAA;AAAA,UADF;AAiCD;;IAtGenB,U;UACerD,S,EAwCDY,c,EAGTC,c;;;KA5CLwC,U;AAwGhB,MAAMqB,IAAI,GAAGrE,MAAM,CAACsE,EAAG;AACvB,CADA;AAGA,MAAMC,QAAQ,GAAGvE,MAAM,CAACwE,EAAG;AAC3B,CADA;AAGA,MAAMC,SAAS,GAAGzE,MAAM,CAACwE,EAAG;AAC5B;AACA;AACA,CAHA;MAAMC,S;AAKN,MAAMC,kBAAkB,GAAG1E,MAAM,CAAC2E,GAAI;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa1E,MAAM,CAAC2E,MAAP,CAAc,GAAd,CAAmB;AAChC;AACA,oBAAoB3E,MAAM,CAAC2E,MAAP,CAAc,GAAd,CAAmB;AACvC;AACA,CAlBA;MAAMF,kB;AAoBN,MAAMG,SAAS,GAAG7E,MAAM,CAACE,QAAD,CAAW;AACnC;AACA;AACA;AACA,CAJA;MAAM2E,S;AAMN,MAAMC,WAAW,GAAG9E,MAAM,CAACE,QAAD,CAAW;AACrC;AACA,WAAWD,MAAM,CAAC8E,IAAP,CAAY,GAAZ,CAAiB;AAC5B,CAHA;AAKA,MAAMC,YAAY,GAAGhF,MAAM,CAACE,QAAD,CAAW;AACtC;AACA;AACA;AACA;AACA;AACA,CANA;MAAM8E,Y","sourcesContent":["import { formatUnits } from '@ethersproject/units'\nimport uniswapToken from '@uniswap/default-token-list'\nimport { ChainId, ERC20Interface, useContractCall, useContractCalls, useEthers } from '@usedapp/core'\nimport React, { useEffect, useState } from 'react'\nimport { ERC1155Interface } from '../../interfaces/interfaces'\nimport styled from 'styled-components'\nimport { Colors } from '../../global/styles'\nimport { TextBold } from '../../typography/Text'\nimport { TokenIcon } from './TokenIcon'\nimport { Col, Container, Row } from 'react-bootstrap'\nimport { TokenSVGIcon } from './TokenSVGIcon'\nimport { useAppSelector, useAppDispatch } from '../../hooks'\nimport { increment } from '../../features/counter/counterSlice'\nimport { updatedSelectedItem } from './SelectedItemSlice'\n\nimport axios, { AxiosResponse } from 'axios'\n\nconst initBadges: any[] = [];\n\nexport const getTransactionsFor = async (signerAddress: string): Promise<AxiosResponse|null>=> {\n  console.log('signer address : ',signerAddress)\n  const COVALENT_API_KEY = \"ckey_4aed01d0d6e248a7a4ab27acb8a\"\n  const COVALENT_MAINNET = {\n    url: \"https://api.covalenthq.com/v1/1/\",\n  }\n\n  const transactionsForAddress = \n  `${COVALENT_MAINNET.url}address/${signerAddress}/transactions_v2/?key=${COVALENT_API_KEY}`\n\n\n  // Make a request for a user with a given ID\n  return axios.get(transactionsForAddress)\n    .then(function (response) {\n      // handle success\n      return response\n    })\n    .catch(function (error) {\n      // handle error\n      console.log(error);\n\n      return null;\n    });\n}\n\n\nexport const parseResponseForItems =(response: AxiosResponse): (any[]|null) => {\n  if(!response || !response.data || !response.data.data) {\n    return null;\n  }\n  return response.data.data.items;\n}\n\n\nfunction getTokenList(chainId?: ChainId) {\n  return uniswapToken.tokens.filter((token) => token.chainId == chainId)\n}\n\nfunction useTokensBalance(tokenList: any[], account?: string | null) {\n  return useContractCalls(\n    tokenList && account\n      ? tokenList.map((token: any) => ({\n          abi: ERC20Interface,\n          address: token.address,\n          method: 'balanceOf',\n          args: [account],\n        }))\n      : []\n  )\n}\n\nexport function useERC1155TokenBalance(tokenAddress: string,  addresses: (string|undefined|null)[], tokenIds: number[]): any[] {\n  const [tokenBalances] =\n    useContractCall(\n        addresses &&\n        tokenAddress && {\n          abi: ERC1155Interface,\n          address: tokenAddress,\n          method: 'balanceOfBatch',\n          args: [addresses, tokenIds],\n        }\n    ) ?? []\n  return tokenBalances\n}\n\nfunction useERC1155TokenBalances(tokenAddresses: string[], addresses: (string|undefined|null)[], tokenIds: number[]): any[] {\n  return useContractCalls(\n    tokenAddresses && addresses\n      ? tokenAddresses.map((tokenAddress: any) => ({\n          abi: ERC1155Interface,\n          address: tokenAddress,\n          method: 'balanceOfBatch',\n          args: [addresses, tokenIds],\n        }))\n      : []\n  )\n}\n\nexport function TokensList() {\n  const { chainId, account } = useEthers()\n  const tokenList = getTokenList(chainId)\n  // const balances = useTokensBalance(tokenList, account);\n  const [badges, setBadges] = useState(initBadges);\n  let mountedRef = true;\n\n  useEffect(() => {\n    const doAsync = async () => {\n      console.log('account : ',account);\n      if(!account || account === undefined){\n        return;\n      }\n      console.log('awaiting response....')\n     const response =  await getTransactionsFor('0x2500214f8c6AD68e9314E3f74A91F28789B24A70');  \n     console.log('axios : ',response);\n\n      if(!response){\n        return;\n      }\n\n      const items = parseResponseForItems(response);\n      if(!items) {\n        return;\n      }\n      loadBadges(items);\n\n      console.log('items : ',items);\n    }\n    doAsync();\n    // if(mountedRef) {\n    //   doAsync();\n    // }\n    // return () => {\n    //   mountedRef = false;\n    // }; \n\n  }, []);\n\n\n\n    const selectedItemIndex = useAppSelector((state) => {\n      return state.selectedItem.index;\n    })\n    const dispatch = useAppDispatch();\n\n    const handleItemSelect =(index: number, balance: number, holders: number,name: string, address: string) =>  {\n      \n      dispatch (updatedSelectedItem(\n        {\n          index: index,\n          balance: balance,\n          holders: holders,\n          name: name,\n          address: address        \n        }\n      ))\n    }\n\n\n    const loadBadges =(transactionItems: any[]): void => {\n      const sectionBadge1: any = {\n        section: 'AllActivity',\n        items: transactionItems\n      }\n      setBadges([sectionBadge1]);\n    }\n\n\n  return (\n    <div>\n      {!badges ? (<div>Loading...</div> ): (\n        <ul>\n        {badges.map((section: any, idx:number) => {\n              return (\n              <li key={`parentSection-${idx}`}> \n              <div>\n              <Container>\n              <Row>\n                {section.items &&\n                        section.items.map((sectionItem: any, idx:number) => (\n                          <Col key={`SubSection-${idx}`}>\n                            <TokenItem > \n                            <TokenIconContainer onClick={() => handleItemSelect(idx,idx ,11,`Element ${idx}`,'address')}>\n                              <TokenSVGIcon src={''} alt={''}></TokenSVGIcon>\n                              <TokenBalance> \n                                {formatUnits(0)}\n                              </TokenBalance>\n                            </TokenIconContainer>\n                            <TokenName>Badge Name {idx}</TokenName>\n                          </TokenItem>\n                          </Col>\n                        ))}\n              </Row>\n              </Container>\n              </div>\n              </li>\n          )})}\n      </ul>\n    )}\n    </div>\n  )\n}\n\nconst List = styled.ul`\n`\n\nconst ListItem = styled.li`\n`\n\nconst TokenItem = styled.li`\n  display: flex;\n  flex-direction: column;\n`\n\nconst TokenIconContainer = styled.div`\n  display: flex;\n  justify-content: center;\n  width: 120px;\n  height:120px;\n  margin: 0.2em;\n  border: 1px solid #ebebeb};\n  background: rgb(60, 60, 60);\n  background: rgba(149, 149, 149, 0.4);\n  position: relative;\n\n  &:hover,\n  &:focus, \n  &:active {\n    color: ${Colors.Yellow[100]};\n    border-width: medium;\n    border-color: ${Colors.Yellow[100]};\n  }\n`\n\nconst TokenName = styled(TextBold)`\n  margin-left: 4px;\n  font-size: 12px;\n\n`\n\nconst TokenTicker = styled(TextBold)`\n  grid-area: ticker;\n  color: ${Colors.Gray[600]};\n`\n\nconst TokenBalance = styled(TextBold)`\n  position: absolute;\n  bottom: 0;\n  right: 0;\n  padding:0.25em;\n  font-size: 15px;\n`"]},"metadata":{},"sourceType":"module"}