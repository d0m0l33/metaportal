{"ast":null,"code":"export let TransactionLevel;\n\n(function (TransactionLevel) {\n  TransactionLevel[TransactionLevel[\"Root\"] = 0] = \"Root\";\n  TransactionLevel[TransactionLevel[\"LogEvents\"] = 1] = \"LogEvents\";\n})(TransactionLevel || (TransactionLevel = {}));\n\nexport let CriteriaComparions;\n\n(function (CriteriaComparions) {\n  CriteriaComparions[CriteriaComparions[\"GT\"] = 0] = \"GT\";\n  CriteriaComparions[CriteriaComparions[\"LT\"] = 1] = \"LT\";\n})(CriteriaComparions || (CriteriaComparions = {}));\n\nexport const parseResponseForItems = response => {\n  if (!response || !response.data || !response.data.data) {\n    return null;\n  }\n\n  return response.data.data.items;\n};\nexport const getSuccessfulTransactionCount = items => {\n  let successCount = 0;\n  items.forEach(item => {\n    if (item.successful === true) {\n      successCount++;\n    }\n  });\n  return successCount;\n};\nexport const parseForBadgesForTypes = values => {\n  return [...extractBadgesForBadgeCriteria('successfulTransactions', values[0]), ...extractBadgesForBadgeCriteria('accountCreation', 1)];\n};\nexport const extractBadgesForBadgeCriteria = (badgeType, valueAchieved) => {\n  let successCount = 0;\n  let extractedBadges = [];\n  ALL_BADGES['metaPortal'][badgeType]['greaterThan'].forEach(badgeItem => {\n    if (valueAchieved > badgeItem.value) {\n      extractedBadges.push(badgeItem);\n    }\n  });\n  return extractedBadges;\n};\nexport const RANDOM_VISOR_COLORS = ['black', 'white', 'grey', 'green', 'blue', 'hot-pink', 'purple', 'silver', 'bronze', 'gold'];\nexport const ALL_BADGES = {\n  metaPortal: {\n    accountCreation: {\n      greaterThan: [{\n        value: 0,\n        badgeName: 'Space Cadet'\n      }, {\n        value: 0,\n        badgeName: 'WAGMI Rank 1'\n      }]\n    },\n    successfulTransactions: {\n      greaterThan: [{\n        value: 25,\n        badgeName: 'Explorer Rank 1'\n      }, {\n        value: 50,\n        badgeName: 'Explorer Rank 2'\n      }, {\n        value: 75,\n        badgeName: 'Explorer Rank 3'\n      }, {\n        value: 100,\n        badgeName: 'Sky Captain Rank 1'\n      }]\n    }\n  }\n};\nexport const parseTransactionsForKeyValeObject = (transactions, params) => {\n  if (params.useKeyValueMatching === true) {\n    // cases for key matching that must have the desired value\n    // this is defaulted to a frequency requirement\n    const key = params.keyValueObject.name;\n    const value = params.keyValueObject.value;\n    const frequency = getValueMatchCountForKey(transactions, key, value);\n  } else {\n    const key = params.keyValueObject.name;\n    const frequency = getKeyMatchCount(transactions, key);\n  }\n};\nexport const parseTransactionsForRules = transactions => {\n  const rules = [{\n    level: TransactionLevel.Root,\n    keyValueObject: {\n      name: 'successful',\n      value: true\n    },\n    useKeyValueMatching: true\n  }];\n  transactions.forEach(transaction => {\n    parseTransactionsForKeyValeObject(transaction, rules[0]);\n  });\n};\nexport const getValueMatchCountForKey = (items, key, value) => {\n  let count = 0;\n  items.forEach(item => {\n    if (item[key] && item[key] === value) {\n      count++;\n    }\n  });\n  return count;\n};\nexport const getKeyMatchCount = (items, key) => {\n  let count = 0;\n  items.forEach(item => {\n    if (item[key]) {\n      count++;\n    }\n  });\n  return count;\n};\nexport const getValidBadges = (badges, transactions) => {\n  let validBadges = [];\n  badges.forEach(badge => {\n    if (validateBadgeAgainstTransactions(badge, transactions)) {\n      validBadges.push(badge);\n    }\n  });\n  return validBadges;\n};\nexport const validateBadgeAgainstTransactions = (badge, transactions) => {\n  let isValid = false;\n\n  switch (badge.level) {\n    case TransactionLevel.Root:\n      // compare with rules\n      isValid = executeRootLevelChecksForBadge(badge, transactions);\n      return isValid;\n\n    default:\n      return false;\n  }\n};\nexport const executeRootLevelChecksForBadge = (badge, transactions) => {\n  // defaulting to Key Match frequency comparisons\n  let isValid = false;\n  transactions.forEach(transaction => {// compare with rules\n  });\n  return isValid;\n};","map":{"version":3,"sources":["/Users/dominiclee/Desktop/ethprojs/metaportal/src/portalHooks/BadgeHelper.ts"],"names":["TransactionLevel","CriteriaComparions","parseResponseForItems","response","data","items","getSuccessfulTransactionCount","successCount","forEach","item","successful","parseForBadgesForTypes","values","extractBadgesForBadgeCriteria","badgeType","valueAchieved","extractedBadges","ALL_BADGES","badgeItem","value","push","RANDOM_VISOR_COLORS","metaPortal","accountCreation","greaterThan","badgeName","successfulTransactions","parseTransactionsForKeyValeObject","transactions","params","useKeyValueMatching","key","keyValueObject","name","frequency","getValueMatchCountForKey","getKeyMatchCount","parseTransactionsForRules","rules","level","Root","transaction","count","getValidBadges","badges","validBadges","badge","validateBadgeAgainstTransactions","isValid","executeRootLevelChecksForBadge"],"mappings":"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","sourcesContent":["import { AxiosResponse } from \"axios\";\n\n\nexport enum TransactionLevel {\n  Root = 0,\n  LogEvents\n}\n\nexport enum CriteriaComparions {\n  GT = 0,\n  LT\n}\n\nexport interface UIMetadata {\n  name: string,\n  balance: number,\n  imageUri: string\n}\n\n\n\n\nexport interface Badge {\n  ui : UIMetadata| null;\n  level: TransactionLevel,\n  keyValueObject: KeyValueObject,\n  useKeyValueMatching: boolean,\n}\n\n\nexport interface RequirementsCriteria {\n  comparison : CriteriaComparions,\n  value: number\n}\n\n\n\n\n\nexport interface ParseParams {\n  level: TransactionLevel,\n  keyValueObject: KeyValueObject,\n  useKeyValueMatching: boolean,\n  criteria: RequirementsCriteria\n}\n\nexport interface KeyValueObject {\n  name: string,\n  value?: boolean|string|number;\n}\n\nexport const parseResponseForItems =(response: AxiosResponse): (any[]|null) => {\n    if(!response || !response.data || !response.data.data) {\n      return null;\n    }\n    return response.data.data.items;\n  }\n  \n  export const getSuccessfulTransactionCount =(items: any[]): number => {\n    let successCount = 0;\n    items.forEach((item) => {\n      if(item.successful === true) {\n        successCount++;\n      }\n    });\n    return successCount;\n  }\n  \n  \n  export const parseForBadgesForTypes =(values: number[]): any[] => {\n    return [\n      ...extractBadgesForBadgeCriteria('successfulTransactions',values[0]),\n      ...extractBadgesForBadgeCriteria('accountCreation',1)\n    ]\n  }\n  \n  \n  export const extractBadgesForBadgeCriteria = (badgeType: string, valueAchieved: number): any[] => {\n    let successCount = 0;\n    let extractedBadges: any[] = [];\n    \n    ALL_BADGES['metaPortal'][badgeType]['greaterThan'].forEach((badgeItem: any) => {\n      if(valueAchieved > badgeItem.value ) {\n        extractedBadges.push(badgeItem);\n      }\n    });\n    return extractedBadges;\n  }\n\n  export const RANDOM_VISOR_COLORS = [\n    'black',\n    'white',\n    'grey',\n    'green',\n    'blue',\n    'hot-pink',\n    'purple',\n    'silver',\n    'bronze',\n    'gold'\n  ]\n  \n  export const ALL_BADGES: any = {\n    metaPortal : {\n      accountCreation : {\n        greaterThan: [\n          {\n            value: 0,\n            badgeName: 'Space Cadet',\n          },\n          {\n            value: 0,\n            badgeName: 'WAGMI Rank 1',\n          },\n        ]\n      },\n      successfulTransactions : {\n  \n        greaterThan: [\n          {\n            value: 25,\n            badgeName: 'Explorer Rank 1',\n          },\n          {\n            value: 50,\n            badgeName: 'Explorer Rank 2',\n          },\n          {\n            value: 75,\n            badgeName: 'Explorer Rank 3',\n          },\n          {\n            value: 100,\n            badgeName: 'Sky Captain Rank 1',\n          }\n        ]\n      }\n    }\n  }\n\n\n  export const parseTransactionsForKeyValeObject =(transactions: any, params: ParseParams) => {\n      if(params.useKeyValueMatching === true) {\n        // cases for key matching that must have the desired value\n        // this is defaulted to a frequency requirement\n        const key = params.keyValueObject.name;\n        const value = params.keyValueObject.value;\n\n        const frequency = getValueMatchCountForKey(transactions, key, value)\n      } else {\n          const key = params.keyValueObject.name;\n          const frequency = getKeyMatchCount(transactions, key)\n      }\n\n  }\n\n\n  export const parseTransactionsForRules =(transactions: any[]) => {\n\n    const rules: any[] = [\n      {\n        level: TransactionLevel.Root,\n        keyValueObject: {name: 'successful', value: true} ,\n        useKeyValueMatching: true\n      }\n    ]\n\n    transactions.forEach((transaction: any) => {\n      parseTransactionsForKeyValeObject(transaction, rules[0]);\n    })\n  }\n\n\n  export const getValueMatchCountForKey = (items: any[], key: string, value: any) =>  {\n      let count = 0;\n      items.forEach((item) => {\n        if(item[key] && item[key] === value) {\n          count++;\n        }\n      });\n      return count;\n  }\n\n  export const getKeyMatchCount = (items: any[], key: string) =>  {\n    let count = 0;\n    items.forEach((item) => {\n      if(item[key]) {\n        count++;\n      }\n    });\n    return count;\n}\n\n\nexport const getValidBadges = (badges: Badge[], transactions: any[]) : Badge[] =>  {\n  let validBadges: Badge[] = [];\n  badges.forEach((badge: Badge) => {\n    if(validateBadgeAgainstTransactions(badge,transactions)){\n      validBadges.push(badge);\n    }\n  });\n  return validBadges;\n}\n\n\nexport const validateBadgeAgainstTransactions = (badge: Badge, transactions: any[]): boolean =>  {\n  let isValid = false;\n  switch(badge.level) {\n    case TransactionLevel.Root :\n        // compare with rules\n        isValid = executeRootLevelChecksForBadge(badge,transactions);\n      return isValid;\n    default:\n      return false;\n  }\n}\n\n\nexport const executeRootLevelChecksForBadge = (badge: Badge, transactions: any[]): boolean =>  {\n  // defaulting to Key Match frequency comparisons\n  let isValid = false;\n  transactions.forEach((transaction) => {\n    // compare with rules\n  });\n  return isValid;\n}"]},"metadata":{},"sourceType":"module"}