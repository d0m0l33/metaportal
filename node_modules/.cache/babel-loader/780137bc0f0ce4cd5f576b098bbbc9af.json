{"ast":null,"code":"import _objectSpread from \"/Users/dominiclee/Desktop/ethprojs/metaportal/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _objectWithoutProperties from \"/Users/dominiclee/Desktop/ethprojs/metaportal/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _slicedToArray from \"/Users/dominiclee/Desktop/ethprojs/metaportal/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _excluded = [\"children\", \"style\"],\n    _excluded2 = [\"html\"];\nimport _extends from '@babel/runtime/helpers/esm/extends';\nimport * as THREE from 'three';\nimport * as React from 'react';\nimport * as ReactDOM from 'react-dom';\nimport { useThree, useFrame, context as context$1 } from '@react-three/fiber';\nimport mergeRefs from 'react-merge-refs';\nvar context = /*#__PURE__*/React.createContext(null);\n\nfunction useScroll() {\n  return React.useContext(context);\n}\n\nfunction ScrollControls(_ref) {\n  var _ref$eps = _ref.eps,\n      eps = _ref$eps === void 0 ? 0.00001 : _ref$eps,\n      _ref$enabled = _ref.enabled,\n      enabled = _ref$enabled === void 0 ? true : _ref$enabled,\n      infinite = _ref.infinite,\n      horizontal = _ref.horizontal,\n      _ref$pages = _ref.pages,\n      pages = _ref$pages === void 0 ? 1 : _ref$pages,\n      _ref$distance = _ref.distance,\n      distance = _ref$distance === void 0 ? 1 : _ref$distance,\n      _ref$damping = _ref.damping,\n      damping = _ref$damping === void 0 ? 4 : _ref$damping,\n      children = _ref.children;\n\n  var _useThree = useThree(),\n      gl = _useThree.gl,\n      size = _useThree.size,\n      invalidate = _useThree.invalidate,\n      events = _useThree.events,\n      raycaster = _useThree.raycaster;\n\n  var _React$useState = React.useState(function () {\n    return document.createElement('div');\n  }),\n      _React$useState2 = _slicedToArray(_React$useState, 1),\n      el = _React$useState2[0];\n\n  var _React$useState3 = React.useState(function () {\n    return document.createElement('div');\n  }),\n      _React$useState4 = _slicedToArray(_React$useState3, 1),\n      fill = _React$useState4[0];\n\n  var _React$useState5 = React.useState(function () {\n    return document.createElement('div');\n  }),\n      _React$useState6 = _slicedToArray(_React$useState5, 1),\n      fixed = _React$useState6[0];\n\n  var target = gl.domElement.parentNode;\n  var scroll = React.useRef(0);\n  var state = React.useMemo(function () {\n    var state = {\n      el: el,\n      eps: eps,\n      fill: fill,\n      fixed: fixed,\n      horizontal: horizontal,\n      damping: damping,\n      offset: 0,\n      delta: 0,\n      scroll: scroll,\n      pages: pages,\n      // 0-1 for a range between from -> from + distance\n      range: function range(from, distance) {\n        var margin = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n        var start = from - margin;\n        var end = start + distance + margin * 2;\n        return this.offset < start ? 0 : this.offset > end ? 1 : (this.offset - start) / (end - start);\n      },\n      // 0-1-0 for a range between from -> from + distance\n      curve: function curve(from, distance) {\n        var margin = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n        return Math.sin(this.range(from, distance, margin) * Math.PI);\n      },\n      // true/false for a range between from -> from + distance\n      visible: function visible(from, distance) {\n        var margin = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n        var start = from - margin;\n        var end = start + distance + margin * 2;\n        return this.offset >= start && this.offset <= end;\n      }\n    };\n    return state;\n  }, [eps, damping, horizontal, pages]);\n  React.useEffect(function () {\n    el.style.position = 'absolute';\n    el.style.width = '100%';\n    el.style.height = '100%';\n    el.style[horizontal ? 'overflowX' : 'overflowY'] = 'auto';\n    el.style[horizontal ? 'overflowY' : 'overflowX'] = 'hidden';\n    el.style.top = '0px';\n    el.style.left = '0px';\n    fixed.style.position = 'sticky';\n    fixed.style.top = '0px';\n    fixed.style.left = '0px';\n    fixed.style.width = '100%';\n    fixed.style.height = '100%';\n    fixed.style.overflow = 'hidden';\n    el.appendChild(fixed);\n    fill.style.height = horizontal ? '100%' : \"\".concat(pages * distance * 100, \"%\");\n    fill.style.width = horizontal ? \"\".concat(pages * distance * 100, \"%\") : '100%';\n    fill.style.pointerEvents = 'none';\n    el.appendChild(fill);\n    target.appendChild(el); // Init scroll one pixel in to allow upward/leftward scroll\n\n    el[horizontal ? 'scrollLeft' : 'scrollTop'] = 1;\n    var oldTarget = typeof events.connected !== 'boolean' ? events.connected : gl.domElement;\n    requestAnimationFrame(function () {\n      return events.connect == null ? void 0 : events.connect(el);\n    });\n    var oldCompute = raycaster.computeOffsets;\n\n    raycaster.computeOffsets = function (_ref2) {\n      var clientX = _ref2.clientX,\n          clientY = _ref2.clientY;\n      return {\n        offsetX: clientX - target.offsetLeft,\n        offsetY: clientY - target.offsetTop\n      };\n    };\n\n    return function () {\n      target.removeChild(el);\n      raycaster.computeOffsets = oldCompute;\n      events.connect == null ? void 0 : events.connect(oldTarget);\n    };\n  }, [pages, distance, horizontal, el, fill, fixed, target]);\n  React.useEffect(function () {\n    var containerLength = size[horizontal ? 'width' : 'height'];\n    var scrollLength = el[horizontal ? 'scrollWidth' : 'scrollHeight'];\n    var scrollThreshold = scrollLength - containerLength;\n    var current = 0;\n    var disableScroll = true;\n    var firstRun = true;\n\n    var onScroll = function onScroll(e) {\n      // Prevent first scroll because it is indirectly caused by the one pixel offset\n      if (!enabled || firstRun) return;\n      invalidate();\n      current = el[horizontal ? 'scrollLeft' : 'scrollTop'];\n      scroll.current = current / scrollThreshold;\n\n      if (infinite) {\n        if (!disableScroll) {\n          if (current >= scrollThreshold) {\n            var damp = 1 - state.offset;\n            el[horizontal ? 'scrollLeft' : 'scrollTop'] = 1;\n            scroll.current = state.offset = -damp;\n            disableScroll = true;\n          } else if (current <= 0) {\n            var _damp = 1 + state.offset;\n\n            el[horizontal ? 'scrollLeft' : 'scrollTop'] = scrollLength;\n            scroll.current = state.offset = _damp;\n            disableScroll = true;\n          }\n        }\n\n        if (disableScroll) setTimeout(function () {\n          return disableScroll = false;\n        }, 40);\n      }\n    };\n\n    el.addEventListener('scroll', onScroll, {\n      passive: true\n    });\n    requestAnimationFrame(function () {\n      return firstRun = false;\n    });\n\n    var onWheel = function onWheel(e) {\n      return el.scrollLeft += e.deltaY / 2;\n    };\n\n    if (horizontal) el.addEventListener('wheel', onWheel, {\n      passive: true\n    });\n    return function () {\n      el.removeEventListener('scroll', onScroll);\n      if (horizontal) el.removeEventListener('wheel', onWheel);\n    };\n  }, [el, size, infinite, state, invalidate, horizontal]);\n  var last = 0;\n  useFrame(function (_, delta) {\n    state.offset = THREE.MathUtils.damp(last = state.offset, scroll.current, damping, delta);\n    state.delta = THREE.MathUtils.damp(state.delta, Math.abs(last - state.offset), damping, delta);\n    if (state.delta > eps) invalidate();\n  });\n  return /*#__PURE__*/React.createElement(context.Provider, {\n    value: state\n  }, children);\n}\n\nvar ScrollCanvas = /*#__PURE__*/React.forwardRef(function (_ref3, ref) {\n  var children = _ref3.children;\n  var group = React.useRef(null);\n  var state = useScroll();\n\n  var _useThree2 = useThree(function (state) {\n    return state.viewport;\n  }),\n      width = _useThree2.width,\n      height = _useThree2.height;\n\n  useFrame(function () {\n    group.current.position.x = state.horizontal ? -width * (state.pages - 1) * state.offset : 0;\n    group.current.position.y = state.horizontal ? 0 : height * (state.pages - 1) * state.offset;\n  });\n  return /*#__PURE__*/React.createElement(\"group\", {\n    ref: mergeRefs([ref, group])\n  }, children);\n});\nvar ScrollHtml = /*#__PURE__*/React.forwardRef(function (_ref4, ref) {\n  var children = _ref4.children,\n      style = _ref4.style,\n      props = _objectWithoutProperties(_ref4, _excluded);\n\n  var state = useScroll();\n  var group = React.useRef(null);\n\n  var _useThree3 = useThree(function (state) {\n    return state.size;\n  }),\n      width = _useThree3.width,\n      height = _useThree3.height;\n\n  var fiberState = React.useContext(context$1);\n  useFrame(function () {\n    if (state.delta > state.eps) {\n      group.current.style.transform = \"translate3d(\".concat(state.horizontal ? -width * (state.pages - 1) * state.offset : 0, \"px,\").concat(state.horizontal ? 0 : height * (state.pages - 1) * -state.offset, \"px,0)\");\n    }\n  });\n  ReactDOM.render( /*#__PURE__*/React.createElement(\"div\", _extends({\n    ref: mergeRefs([ref, group]),\n    style: _objectSpread(_objectSpread({}, style), {}, {\n      position: 'absolute',\n      top: 0,\n      left: 0,\n      willChange: 'transform'\n    })\n  }, props), /*#__PURE__*/React.createElement(context.Provider, {\n    value: state\n  }, /*#__PURE__*/React.createElement(context$1.Provider, {\n    value: fiberState\n  }, children))), state.fixed);\n  return null;\n});\nvar Scroll = /*#__PURE__*/React.forwardRef(function (_ref5, ref) {\n  var html = _ref5.html,\n      props = _objectWithoutProperties(_ref5, _excluded2);\n\n  var El = html ? ScrollHtml : ScrollCanvas;\n  return /*#__PURE__*/React.createElement(El, _extends({\n    ref: ref\n  }, props));\n});\nexport { Scroll, ScrollControls, useScroll };","map":{"version":3,"sources":["/Users/dominiclee/Desktop/ethprojs/metaportal/node_modules/@react-three/drei/web/ScrollControls.js"],"names":["_extends","THREE","React","ReactDOM","useThree","useFrame","context","context$1","mergeRefs","createContext","useScroll","useContext","ScrollControls","eps","enabled","infinite","horizontal","pages","distance","damping","children","gl","size","invalidate","events","raycaster","useState","document","createElement","el","fill","fixed","target","domElement","parentNode","scroll","useRef","state","useMemo","offset","delta","range","from","margin","start","end","curve","Math","sin","PI","visible","useEffect","style","position","width","height","top","left","overflow","appendChild","pointerEvents","oldTarget","connected","requestAnimationFrame","connect","oldCompute","computeOffsets","clientX","clientY","offsetX","offsetLeft","offsetY","offsetTop","removeChild","containerLength","scrollLength","scrollThreshold","current","disableScroll","firstRun","onScroll","e","damp","setTimeout","addEventListener","passive","onWheel","scrollLeft","deltaY","removeEventListener","last","_","MathUtils","abs","Provider","value","ScrollCanvas","forwardRef","ref","group","viewport","x","y","ScrollHtml","props","fiberState","transform","render","willChange","Scroll","html","El"],"mappings":"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","sourcesContent":["import _extends from '@babel/runtime/helpers/esm/extends';\nimport * as THREE from 'three';\nimport * as React from 'react';\nimport * as ReactDOM from 'react-dom';\nimport { useThree, useFrame, context as context$1 } from '@react-three/fiber';\nimport mergeRefs from 'react-merge-refs';\n\nconst context = /*#__PURE__*/React.createContext(null);\nfunction useScroll() {\n  return React.useContext(context);\n}\nfunction ScrollControls({\n  eps = 0.00001,\n  enabled = true,\n  infinite,\n  horizontal,\n  pages = 1,\n  distance = 1,\n  damping = 4,\n  children\n}) {\n  const {\n    gl,\n    size,\n    invalidate,\n    events,\n    raycaster\n  } = useThree();\n  const [el] = React.useState(() => document.createElement('div'));\n  const [fill] = React.useState(() => document.createElement('div'));\n  const [fixed] = React.useState(() => document.createElement('div'));\n  const target = gl.domElement.parentNode;\n  const scroll = React.useRef(0);\n  const state = React.useMemo(() => {\n    const state = {\n      el,\n      eps,\n      fill,\n      fixed,\n      horizontal,\n      damping,\n      offset: 0,\n      delta: 0,\n      scroll,\n      pages,\n\n      // 0-1 for a range between from -> from + distance\n      range(from, distance, margin = 0) {\n        const start = from - margin;\n        const end = start + distance + margin * 2;\n        return this.offset < start ? 0 : this.offset > end ? 1 : (this.offset - start) / (end - start);\n      },\n\n      // 0-1-0 for a range between from -> from + distance\n      curve(from, distance, margin = 0) {\n        return Math.sin(this.range(from, distance, margin) * Math.PI);\n      },\n\n      // true/false for a range between from -> from + distance\n      visible(from, distance, margin = 0) {\n        const start = from - margin;\n        const end = start + distance + margin * 2;\n        return this.offset >= start && this.offset <= end;\n      }\n\n    };\n    return state;\n  }, [eps, damping, horizontal, pages]);\n  React.useEffect(() => {\n    el.style.position = 'absolute';\n    el.style.width = '100%';\n    el.style.height = '100%';\n    el.style[horizontal ? 'overflowX' : 'overflowY'] = 'auto';\n    el.style[horizontal ? 'overflowY' : 'overflowX'] = 'hidden';\n    el.style.top = '0px';\n    el.style.left = '0px';\n    fixed.style.position = 'sticky';\n    fixed.style.top = '0px';\n    fixed.style.left = '0px';\n    fixed.style.width = '100%';\n    fixed.style.height = '100%';\n    fixed.style.overflow = 'hidden';\n    el.appendChild(fixed);\n    fill.style.height = horizontal ? '100%' : `${pages * distance * 100}%`;\n    fill.style.width = horizontal ? `${pages * distance * 100}%` : '100%';\n    fill.style.pointerEvents = 'none';\n    el.appendChild(fill);\n    target.appendChild(el); // Init scroll one pixel in to allow upward/leftward scroll\n\n    el[horizontal ? 'scrollLeft' : 'scrollTop'] = 1;\n    const oldTarget = typeof events.connected !== 'boolean' ? events.connected : gl.domElement;\n    requestAnimationFrame(() => events.connect == null ? void 0 : events.connect(el));\n    const oldCompute = raycaster.computeOffsets;\n\n    raycaster.computeOffsets = ({\n      clientX,\n      clientY\n    }) => ({\n      offsetX: clientX - target.offsetLeft,\n      offsetY: clientY - target.offsetTop\n    });\n\n    return () => {\n      target.removeChild(el);\n      raycaster.computeOffsets = oldCompute;\n      events.connect == null ? void 0 : events.connect(oldTarget);\n    };\n  }, [pages, distance, horizontal, el, fill, fixed, target]);\n  React.useEffect(() => {\n    const containerLength = size[horizontal ? 'width' : 'height'];\n    const scrollLength = el[horizontal ? 'scrollWidth' : 'scrollHeight'];\n    const scrollThreshold = scrollLength - containerLength;\n    let current = 0;\n    let disableScroll = true;\n    let firstRun = true;\n\n    const onScroll = e => {\n      // Prevent first scroll because it is indirectly caused by the one pixel offset\n      if (!enabled || firstRun) return;\n      invalidate();\n      current = el[horizontal ? 'scrollLeft' : 'scrollTop'];\n      scroll.current = current / scrollThreshold;\n\n      if (infinite) {\n        if (!disableScroll) {\n          if (current >= scrollThreshold) {\n            const damp = 1 - state.offset;\n            el[horizontal ? 'scrollLeft' : 'scrollTop'] = 1;\n            scroll.current = state.offset = -damp;\n            disableScroll = true;\n          } else if (current <= 0) {\n            const damp = 1 + state.offset;\n            el[horizontal ? 'scrollLeft' : 'scrollTop'] = scrollLength;\n            scroll.current = state.offset = damp;\n            disableScroll = true;\n          }\n        }\n\n        if (disableScroll) setTimeout(() => disableScroll = false, 40);\n      }\n    };\n\n    el.addEventListener('scroll', onScroll, {\n      passive: true\n    });\n    requestAnimationFrame(() => firstRun = false);\n\n    const onWheel = e => el.scrollLeft += e.deltaY / 2;\n\n    if (horizontal) el.addEventListener('wheel', onWheel, {\n      passive: true\n    });\n    return () => {\n      el.removeEventListener('scroll', onScroll);\n      if (horizontal) el.removeEventListener('wheel', onWheel);\n    };\n  }, [el, size, infinite, state, invalidate, horizontal]);\n  let last = 0;\n  useFrame((_, delta) => {\n    state.offset = THREE.MathUtils.damp(last = state.offset, scroll.current, damping, delta);\n    state.delta = THREE.MathUtils.damp(state.delta, Math.abs(last - state.offset), damping, delta);\n    if (state.delta > eps) invalidate();\n  });\n  return /*#__PURE__*/React.createElement(context.Provider, {\n    value: state\n  }, children);\n}\nconst ScrollCanvas = /*#__PURE__*/React.forwardRef(({\n  children\n}, ref) => {\n  const group = React.useRef(null);\n  const state = useScroll();\n  const {\n    width,\n    height\n  } = useThree(state => state.viewport);\n  useFrame(() => {\n    group.current.position.x = state.horizontal ? -width * (state.pages - 1) * state.offset : 0;\n    group.current.position.y = state.horizontal ? 0 : height * (state.pages - 1) * state.offset;\n  });\n  return /*#__PURE__*/React.createElement(\"group\", {\n    ref: mergeRefs([ref, group])\n  }, children);\n});\nconst ScrollHtml = /*#__PURE__*/React.forwardRef(({\n  children,\n  style,\n  ...props\n}, ref) => {\n  const state = useScroll();\n  const group = React.useRef(null);\n  const {\n    width,\n    height\n  } = useThree(state => state.size);\n  const fiberState = React.useContext(context$1);\n  useFrame(() => {\n    if (state.delta > state.eps) {\n      group.current.style.transform = `translate3d(${state.horizontal ? -width * (state.pages - 1) * state.offset : 0}px,${state.horizontal ? 0 : height * (state.pages - 1) * -state.offset}px,0)`;\n    }\n  });\n  ReactDOM.render( /*#__PURE__*/React.createElement(\"div\", _extends({\n    ref: mergeRefs([ref, group]),\n    style: { ...style,\n      position: 'absolute',\n      top: 0,\n      left: 0,\n      willChange: 'transform'\n    }\n  }, props), /*#__PURE__*/React.createElement(context.Provider, {\n    value: state\n  }, /*#__PURE__*/React.createElement(context$1.Provider, {\n    value: fiberState\n  }, children))), state.fixed);\n  return null;\n});\nconst Scroll = /*#__PURE__*/React.forwardRef(({\n  html,\n  ...props\n}, ref) => {\n  const El = html ? ScrollHtml : ScrollCanvas;\n  return /*#__PURE__*/React.createElement(El, _extends({\n    ref: ref\n  }, props));\n});\n\nexport { Scroll, ScrollControls, useScroll };\n"]},"metadata":{},"sourceType":"module"}